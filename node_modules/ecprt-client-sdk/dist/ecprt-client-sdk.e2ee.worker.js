!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";function e(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function n(e,n,t){return n=o(n),function(e,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(n,t||[],o(e).constructor):n.apply(e,t))}function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function i(e,n,t){return n&&r(e.prototype,n),t&&r(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=v(e))||n){t&&(e=t);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==t.return||t.return()}finally{if(u)throw a}}}}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}function u(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&f(e,n)}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(s=function(){return!!e})()}function c(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */
var e,n,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",i=t.toStringTag||"@@toStringTag";function a(t,r,i,a){var s=r&&r.prototype instanceof u?r:u,c=Object.create(s.prototype);return l(c,"_invoke",function(t,r,i){var a,u,s,c=0,l=i||[],f=!1,d={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(n,t){return a=n,u=0,s=e,d.n=t,o}};function m(t,r){for(u=t,s=r,n=0;!f&&c&&!i&&n<l.length;n++){var i,a=l[n],m=d.p,y=a[2];t>3?(i=y===r)&&(s=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=e):a[0]<=m&&((i=t<2&&m<a[1])?(u=0,d.v=r,d.n=a[1]):m<y&&(i=t<3||a[0]>r||r>y)&&(a[4]=t,a[5]=r,d.n=y,u=0))}if(i||t>1)return o;throw f=!0,r}return function(i,l,y){if(c>1)throw TypeError("Generator is already running");for(f&&1===l&&m(l,y),u=l,s=y;(n=u<2?e:s)||!f;){a||(u?u<3?(u>1&&(d.n=-1),m(u,s)):d.n=s:d.v=s);try{if(c=2,a){if(u||(i="next"),n=a[i]){if(!(n=n.call(a,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,u<2&&(u=0)}else 1===u&&(n=a.return)&&n.call(a),u<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),u=1);a=e}else if((n=(f=d.n<0)?s:t.call(r,d))!==o)break}catch(n){a=e,u=1,s=n}finally{c=1}}return{value:n,done:f}}}(t,i,a),!0),c}var o={};function u(){}function s(){}function f(){}n=Object.getPrototypeOf;var d=[][r]?n(n([][r]())):(l(n={},r,function(){return this}),n),m=f.prototype=u.prototype=Object.create(d);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,l(e,i,"GeneratorFunction")),e.prototype=Object.create(m),e}return s.prototype=f,l(m,"constructor",f),l(f,"constructor",s),s.displayName="GeneratorFunction",l(f,i,"GeneratorFunction"),l(m),l(m,i,"Generator"),l(m,r,function(){return this}),l(m,"toString",function(){return"[object Generator]"}),(c=function(){return{w:a,m:y}})()}function l(e,n,t,r){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}l=function(e,n,t,r){if(n)i?i(e,n,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[n]=t;else{function a(n,t){l(e,n,function(e){return this._invoke(n,t,e)})}a("next",0),a("throw",1),a("return",2)}},l(e,n,t,r)}function f(e,n){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},f(e,n)}function d(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(r=a.call(t)).done)&&(u.push(r.value),u.length!==n);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=t.return&&(o=t.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,n)||v(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(n){return function(n){if(Array.isArray(n))return e(n)}(n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||v(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(n,t){if(n){if("string"==typeof n)return e(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(n,t):void 0}}function k(e){var n="function"==typeof Map?new Map:void 0;return k=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(n){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return function(e,n,t){if(s())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,n);var i=new(e.bind.apply(e,r));return t&&f(i,t.prototype),i}(e,arguments,o(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),f(t,e)},k(e)}function h(e,n,t,r){return new(t||(t=Promise))(function(i,a){function o(e){try{s(r.next(e))}catch(e){a(e)}}function u(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(o,u)}s((r=r.apply(e,n||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;var g,T,w,S="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},b={exports:{}};T=S,w=function(){var e=function(){},n="undefined",t=("undefined"==typeof window?"undefined":p(window))!==n&&p(window.navigator)!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],i={},a=null;function o(e,n){var t=e[n];if("function"==typeof t.bind)return t.bind(e);try{return Function.prototype.bind.call(t,e)}catch(n){return function(){return Function.prototype.apply.apply(t,[e,arguments])}}}function u(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(){for(var t=this.getLevel(),i=0;i<r.length;i++){var a=r[i];this[a]=i<t?e:this.methodFactory(a,t,this.name)}if(this.log=this.debug,("undefined"==typeof console?"undefined":p(console))===n&&t<this.levels.SILENT)return"No console available for logging"}function c(e){return function(){("undefined"==typeof console?"undefined":p(console))!==n&&(s.call(this),this[e].apply(this,arguments))}}function l(r,i,a){return function(r){return"debug"===r&&(r="log"),("undefined"==typeof console?"undefined":p(console))!==n&&("trace"===r&&t?u:void 0!==console[r]?o(console,r):void 0!==console.log?o(console,"log"):e)}(r)||c.apply(this,arguments)}function f(e,t){var o,u,c,f=this,d="loglevel";function m(){var e;if(("undefined"==typeof window?"undefined":p(window))!==n&&d){try{e=window.localStorage[d]}catch(e){}if(p(e)===n)try{var t=window.document.cookie,r=encodeURIComponent(d),i=t.indexOf(r+"=");-1!==i&&(e=/^([^;]+)/.exec(t.slice(i+r.length+1))[1])}catch(e){}return void 0===f.levels[e]&&(e=void 0),e}}function y(e){var n=e;if("string"==typeof n&&void 0!==f.levels[n.toUpperCase()]&&(n=f.levels[n.toUpperCase()]),"number"==typeof n&&n>=0&&n<=f.levels.SILENT)return n;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?d+=":"+e:"symbol"===p(e)&&(d=void 0),f.name=e,f.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},f.methodFactory=t||l,f.getLevel=function(){return null!=c?c:null!=u?u:o},f.setLevel=function(e,t){return c=y(e),!1!==t&&function(e){var t=(r[e]||"silent").toUpperCase();if(("undefined"==typeof window?"undefined":p(window))!==n&&d){try{return void(window.localStorage[d]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"="+t+";"}catch(e){}}}(c),s.call(f)},f.setDefaultLevel=function(e){u=y(e),m()||f.setLevel(e,!1)},f.resetLevel=function(){c=null,function(){if(("undefined"==typeof window?"undefined":p(window))!==n&&d){try{window.localStorage.removeItem(d)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),s.call(f)},f.enableAll=function(e){f.setLevel(f.levels.TRACE,e)},f.disableAll=function(e){f.setLevel(f.levels.SILENT,e)},f.rebuild=function(){if(a!==f&&(o=y(a.getLevel())),s.call(f),a===f)for(var e in i)i[e].rebuild()},o=y(a?a.getLevel():"WARN");var v=m();null!=v&&(c=y(v)),s.call(f)}(a=new f).getLogger=function(e){if("symbol"!==p(e)&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var n=i[e];return n||(n=i[e]=new f(e,a.methodFactory)),n};var d=("undefined"==typeof window?"undefined":p(window))!==n?window.log:void 0;return a.noConflict=function(){return("undefined"==typeof window?"undefined":p(window))!==n&&window.log===a&&(window.log=d),a},a.getLoggers=function(){return i},a.default=a,a},(g=b).exports?g.exports=w():T.log=w();var E,N,I=b.exports;!function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"}(E||(E={})),function(e){e.Default="livekit",e.Room="livekit-room",e.Participant="livekit-participant",e.Track="livekit-track",e.Publication="livekit-track-publication",e.Engine="livekit-engine",e.Signal="livekit-signal",e.PCManager="livekit-pc-manager",e.PCTransport="livekit-pc-transport",e.E2EE="lk-e2ee"}(N||(N={}));var _=I.getLogger("livekit");function O(e){var n=I.getLogger(e);return n.setDefaultLevel(_.getLevel()),n}Object.values(N).map(function(e){return I.getLogger(e)}),_.setDefaultLevel(E.info);var L=I.getLogger("lk-e2ee");function A(e,n){if(!e)throw new Error(n)}function C(e){if("number"!=typeof e)throw new Error("invalid int 32: "+p(e));if(!Number.isInteger(e)||e>2147483647||e<-2147483648)throw new Error("invalid int 32: "+e)}function J(e){if("number"!=typeof e)throw new Error("invalid uint 32: "+p(e));if(!Number.isInteger(e)||e>4294967295||e<0)throw new Error("invalid uint 32: "+e)}function R(e){if("number"!=typeof e)throw new Error("invalid float 32: "+p(e));if(Number.isFinite(e)&&(e>34028234663852886e22||e<-34028234663852886e22))throw new Error("invalid float 32: "+e)}var P=Symbol("@bufbuild/protobuf/enum-type");function D(e){var n=e[P];return A(n,"missing enum type on enum object"),n}function U(e,n,t,r){e[P]=F(n,t.map(function(n){return{no:n.no,name:n.name,localName:e[n.no]}}))}function F(e,n,t){var r,i=Object.create(null),o=Object.create(null),u=[],s=a(n);try{for(s.s();!(r=s.n()).done;){var c=r.value,l=q(c);u.push(l),i[c.name]=l,o[c.no]=l}}catch(e){s.e(e)}finally{s.f()}return{typeName:e,values:u,findName:function(e){return i[e]},findNumber:function(e){return o[e]}}}function B(e,n,t){var r,i={},o=a(n);try{for(o.s();!(r=o.n()).done;){var u=q(r.value);i[u.localName]=u.no,i[u.no]=u.localName}}catch(e){o.e(e)}finally{o.f()}return U(i,e,n),i}function q(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}var M=function(){return i(function e(){t(this,e)},[{key:"equals",value:function(e){return this.getType().runtime.util.equals(this.getType(),this,e)}},{key:"clone",value:function(){return this.getType().runtime.util.clone(this)}},{key:"fromBinary",value:function(e,n){var t=this.getType().runtime.bin,r=t.makeReadOptions(n);return t.readMessage(this,r.readerFactory(e),e.byteLength,r),this}},{key:"fromJson",value:function(e,n){var t=this.getType(),r=t.runtime.json,i=r.makeReadOptions(n);return r.readMessage(t,e,i,this),this}},{key:"fromJsonString",value:function(e,n){var t;try{t=JSON.parse(e)}catch(e){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(e instanceof Error?e.message:String(e)))}return this.fromJson(t,n)}},{key:"toBinary",value:function(e){var n=this.getType().runtime.bin,t=n.makeWriteOptions(e),r=t.writerFactory();return n.writeMessage(this,r,t),r.finish()}},{key:"toJson",value:function(e){var n=this.getType().runtime.json,t=n.makeWriteOptions(e);return n.writeMessage(this,t)}},{key:"toJsonString",value:function(e){var n,t=this.toJson(e);return JSON.stringify(t,null,null!==(n=null==e?void 0:e.prettySpaces)&&void 0!==n?n:0)}},{key:"toJSON",value:function(){return this.toJson({emitDefaultValues:!0})}},{key:"getType",value:function(){return Object.getPrototypeOf(this).constructor}}])}();function x(e,n,t,r){var i,a,o,u,s=null!==(i=null==r?void 0:r.localName)&&void 0!==i?i:n.substring(n.lastIndexOf(".")+1),c=(a={},o=s,u=function(n){e.util.initFields(this),e.util.initPartial(n,this)},(o=y(o))in a?Object.defineProperty(a,o,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[o]=u,a)[s];return Object.setPrototypeOf(c.prototype,new M),Object.assign(c,{runtime:e,typeName:n,fields:e.util.newFieldList(t),fromBinary:function(e,n){return(new c).fromBinary(e,n)},fromJson:function(e,n){return(new c).fromJson(e,n)},fromJsonString:function(e,n){return(new c).fromJsonString(e,n)},equals:function(n,t){return e.util.equals(c,n,t)}}),c}function K(){for(var e=0,n=0,t=0;t<28;t+=7){var r=this.buf[this.pos++];if(e|=(127&r)<<t,!(128&r))return this.assertBounds(),[e,n]}var i=this.buf[this.pos++];if(e|=(15&i)<<28,n=(112&i)>>4,!(128&i))return this.assertBounds(),[e,n];for(var a=3;a<=31;a+=7){var o=this.buf[this.pos++];if(n|=(127&o)<<a,!(128&o))return this.assertBounds(),[e,n]}throw new Error("invalid varint")}function V(e,n,t){for(var r=0;r<28;r+=7){var i=e>>>r,a=!(i>>>7==0&&0==n),o=255&(a?128|i:i);if(t.push(o),!a)return}var u=e>>>28&15|(7&n)<<4,s=!!(n>>3);if(t.push(255&(s?128|u:u)),s){for(var c=3;c<31;c+=7){var l=n>>>c,f=!(l>>>7==0),d=255&(f?128|l:l);if(t.push(d),!f)return}t.push(n>>>31&1)}}var j=4294967296;function G(e){var n="-"===e[0];n&&(e=e.slice(1));var t=1e6,r=0,i=0;function a(n,a){var o=Number(e.slice(n,a));i*=t,(r=r*t+o)>=j&&(i+=r/j|0,r%=j)}return a(-24,-18),a(-18,-12),a(-12,-6),a(-6),n?z(r,i):W(r,i)}function H(e,n){var t=function(e,n){return{lo:e>>>0,hi:n>>>0}}(e,n);if(e=t.lo,(n=t.hi)<=2097151)return String(j*n+e);var r=16777215&(e>>>24|n<<8),i=n>>16&65535,a=(16777215&e)+6777216*r+6710656*i,o=r+8147497*i,u=2*i,s=1e7;return a>=s&&(o+=Math.floor(a/s),a%=s),o>=s&&(u+=Math.floor(o/s),o%=s),u.toString()+X(o)+X(a)}function W(e,n){return{lo:0|e,hi:0|n}}function z(e,n){return n=~n,e?e=1+~e:n+=1,W(e,n)}var X=function(e){var n=String(e);return"0000000".slice(n.length)+n};function Y(e,n){if(e>=0){for(;e>127;)n.push(127&e|128),e>>>=7;n.push(e)}else{for(var t=0;t<9;t++)n.push(127&e|128),e>>=7;n.push(1)}}function Q(){var e=this.buf[this.pos++],n=127&e;if(!(128&e))return this.assertBounds(),n;if(n|=(127&(e=this.buf[this.pos++]))<<7,!(128&e))return this.assertBounds(),n;if(n|=(127&(e=this.buf[this.pos++]))<<14,!(128&e))return this.assertBounds(),n;if(n|=(127&(e=this.buf[this.pos++]))<<21,!(128&e))return this.assertBounds(),n;n|=(15&(e=this.buf[this.pos++]))<<28;for(var t=5;128&e&&t<10;t++)e=this.buf[this.pos++];if(128&e)throw new Error("invalid varint");return this.assertBounds(),n>>>0}var Z,$,ee,ne=function(){var e=new DataView(new ArrayBuffer(8));if("function"==typeof BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64&&("object"!=("undefined"==typeof process?"undefined":p(process))||"object"!=p(process.env)||"1"!==process.env.BUF_BIGINT_DISABLE)){var n=BigInt("-9223372036854775808"),t=BigInt("9223372036854775807"),r=BigInt("0"),i=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse:function(e){var r="bigint"==typeof e?e:BigInt(e);if(r>t||r<n)throw new Error("int64 invalid: ".concat(e));return r},uParse:function(e){var n="bigint"==typeof e?e:BigInt(e);if(n>i||n<r)throw new Error("uint64 invalid: ".concat(e));return n},enc:function(n){return e.setBigInt64(0,this.parse(n),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc:function(n){return e.setBigInt64(0,this.uParse(n),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:function(n,t){return e.setInt32(0,n,!0),e.setInt32(4,t,!0),e.getBigInt64(0,!0)},uDec:function(n,t){return e.setInt32(0,n,!0),e.setInt32(4,t,!0),e.getBigUint64(0,!0)}}}var a=function(e){return A(/^-?[0-9]+$/.test(e),"int64 invalid: ".concat(e))},o=function(e){return A(/^[0-9]+$/.test(e),"uint64 invalid: ".concat(e))};return{zero:"0",supported:!1,parse:function(e){return"string"!=typeof e&&(e=e.toString()),a(e),e},uParse:function(e){return"string"!=typeof e&&(e=e.toString()),o(e),e},enc:function(e){return"string"!=typeof e&&(e=e.toString()),a(e),G(e)},uEnc:function(e){return"string"!=typeof e&&(e=e.toString()),o(e),G(e)},dec:function(e,n){return function(e,n){var t=W(e,n),r=2147483648&t.hi;r&&(t=z(t.lo,t.hi));var i=H(t.lo,t.hi);return r?"-"+i:i}(e,n)},uDec:function(e,n){return H(e,n)}}}();function te(e,n,t){if(n===t)return!0;if(e==Z.BYTES){if(!(n instanceof Uint8Array&&t instanceof Uint8Array))return!1;if(n.length!==t.length)return!1;for(var r=0;r<n.length;r++)if(n[r]!==t[r])return!1;return!0}switch(e){case Z.UINT64:case Z.FIXED64:case Z.INT64:case Z.SFIXED64:case Z.SINT64:return n==t}return!1}function re(e,n){switch(e){case Z.BOOL:return!1;case Z.UINT64:case Z.FIXED64:case Z.INT64:case Z.SFIXED64:case Z.SINT64:return 0==n?ne.zero:"0";case Z.DOUBLE:case Z.FLOAT:return 0;case Z.BYTES:return new Uint8Array(0);case Z.STRING:return"";default:return 0}}function ie(e,n){switch(e){case Z.BOOL:return!1===n;case Z.STRING:return""===n;case Z.BYTES:return n instanceof Uint8Array&&!n.byteLength;default:return 0==n}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(Z||(Z={})),function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING"}($||($={})),function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(ee||(ee={}));var ae=function(){return i(function e(n){t(this,e),this.stack=[],this.textEncoder=null!=n?n:new TextEncoder,this.chunks=[],this.buf=[]},[{key:"finish",value:function(){this.chunks.push(new Uint8Array(this.buf));for(var e=0,n=0;n<this.chunks.length;n++)e+=this.chunks[n].length;for(var t=new Uint8Array(e),r=0,i=0;i<this.chunks.length;i++)t.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],t}},{key:"fork",value:function(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}},{key:"join",value:function(){var e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}},{key:"tag",value:function(e,n){return this.uint32((e<<3|n)>>>0)}},{key:"raw",value:function(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}},{key:"uint32",value:function(e){for(J(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}},{key:"int32",value:function(e){return C(e),Y(e,this.buf),this}},{key:"bool",value:function(e){return this.buf.push(e?1:0),this}},{key:"bytes",value:function(e){return this.uint32(e.byteLength),this.raw(e)}},{key:"string",value:function(e){var n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}},{key:"float",value:function(e){R(e);var n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}},{key:"double",value:function(e){var n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}},{key:"fixed32",value:function(e){J(e);var n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}},{key:"sfixed32",value:function(e){C(e);var n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}},{key:"sint32",value:function(e){return C(e),Y(e=(e<<1^e>>31)>>>0,this.buf),this}},{key:"sfixed64",value:function(e){var n=new Uint8Array(8),t=new DataView(n.buffer),r=ne.enc(e);return t.setInt32(0,r.lo,!0),t.setInt32(4,r.hi,!0),this.raw(n)}},{key:"fixed64",value:function(e){var n=new Uint8Array(8),t=new DataView(n.buffer),r=ne.uEnc(e);return t.setInt32(0,r.lo,!0),t.setInt32(4,r.hi,!0),this.raw(n)}},{key:"int64",value:function(e){var n=ne.enc(e);return V(n.lo,n.hi,this.buf),this}},{key:"sint64",value:function(e){var n=ne.enc(e),t=n.hi>>31;return V(n.lo<<1^t,(n.hi<<1|n.lo>>>31)^t,this.buf),this}},{key:"uint64",value:function(e){var n=ne.uEnc(e);return V(n.lo,n.hi,this.buf),this}}])}(),oe=function(){return i(function e(n,r){t(this,e),this.varint64=K,this.uint32=Q,this.buf=n,this.len=n.length,this.pos=0,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.textDecoder=null!=r?r:new TextDecoder},[{key:"tag",value:function(){var e=this.uint32(),n=e>>>3,t=7&e;if(n<=0||t<0||t>5)throw new Error("illegal tag: field no "+n+" wire type "+t);return[n,t]}},{key:"skip",value:function(e,n){var t=this.pos;switch(e){case ee.Varint:for(;128&this.buf[this.pos++];);break;case ee.Bit64:this.pos+=4;case ee.Bit32:this.pos+=4;break;case ee.LengthDelimited:var r=this.uint32();this.pos+=r;break;case ee.StartGroup:for(;;){var i=d(this.tag(),2),a=i[0],o=i[1];if(o===ee.EndGroup){if(void 0!==n&&a!==n)throw new Error("invalid end group tag");break}this.skip(o,a)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(t,this.pos)}},{key:"assertBounds",value:function(){if(this.pos>this.len)throw new RangeError("premature EOF")}},{key:"int32",value:function(){return 0|this.uint32()}},{key:"sint32",value:function(){var e=this.uint32();return e>>>1^-(1&e)}},{key:"int64",value:function(){return ne.dec.apply(ne,m(this.varint64()))}},{key:"uint64",value:function(){return ne.uDec.apply(ne,m(this.varint64()))}},{key:"sint64",value:function(){var e=d(this.varint64(),2),n=e[0],t=e[1],r=-(1&n);return n=(n>>>1|(1&t)<<31)^r,t=t>>>1^r,ne.dec(n,t)}},{key:"bool",value:function(){var e=d(this.varint64(),2),n=e[0],t=e[1];return 0!==n||0!==t}},{key:"fixed32",value:function(){return this.view.getUint32((this.pos+=4)-4,!0)}},{key:"sfixed32",value:function(){return this.view.getInt32((this.pos+=4)-4,!0)}},{key:"fixed64",value:function(){return ne.uDec(this.sfixed32(),this.sfixed32())}},{key:"sfixed64",value:function(){return ne.dec(this.sfixed32(),this.sfixed32())}},{key:"float",value:function(){return this.view.getFloat32((this.pos+=4)-4,!0)}},{key:"double",value:function(){return this.view.getFloat64((this.pos+=8)-8,!0)}},{key:"bytes",value:function(){var e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}},{key:"string",value:function(){return this.textDecoder.decode(this.bytes())}}])}();function ue(e){var n=e.field.localName,t=Object.create(null);return t[n]=function(e){var n=e.field;if(n.repeated)return[];if(void 0!==n.default)return n.default;switch(n.kind){case"enum":return n.T.values[0].no;case"scalar":return re(n.T,n.L);case"message":var t=n.T,r=new t;return t.fieldWrapper?t.fieldWrapper.unwrapField(r):r;case"map":throw"map fields are not allowed to be extensions"}}(e),[t,function(){return t[n]}]}for(var se="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),ce=[],le=0;le<se.length;le++)ce[se[le].charCodeAt(0)]=le;ce["-".charCodeAt(0)]=se.indexOf("+"),ce["_".charCodeAt(0)]=se.indexOf("/");var fe=function(e){var n=3*e.length/4;"="==e[e.length-2]?n-=2:"="==e[e.length-1]&&(n-=1);for(var t,r=new Uint8Array(n),i=0,a=0,o=0,u=0;u<e.length;u++){if(void 0===(t=ce[e.charCodeAt(u)]))switch(e[u]){case"=":a=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(a){case 0:o=t,a=1;break;case 1:r[i++]=o<<2|(48&t)>>4,o=t,a=2;break;case 2:r[i++]=(15&o)<<4|(60&t)>>2,o=t,a=3;break;case 3:r[i++]=(3&o)<<6|t,a=0}}if(1==a)throw Error("invalid base64 string.");return r.subarray(0,i)},de=function(e){for(var n,t="",r=0,i=0,a=0;a<e.length;a++)switch(n=e[a],r){case 0:t+=se[n>>2],i=(3&n)<<4,r=1;break;case 1:t+=se[i|n>>4],i=(15&n)<<2,r=2;break;case 2:t+=se[i|n>>6],t+=se[63&n],r=0}return r&&(t+=se[i],t+="=",1==r&&(t+="=")),t};function me(e,n,t){ve(n,e);var r,i=n.runtime.bin.makeReadOptions(t),o=function(e,n){if(!n.repeated&&("enum"==n.kind||"scalar"==n.kind)){for(var t=e.length-1;t>=0;--t)if(e[t].no==n.no)return[e[t]];return[]}return e.filter(function(e){return e.no===n.no})}(e.getType().runtime.bin.listUnknownFields(e),n.field),u=d(ue(n),2),s=u[0],c=u[1],l=a(o);try{for(l.s();!(r=l.n()).done;){var f=r.value;n.runtime.bin.readField(s,i.readerFactory(f.data),n.field,f.wireType,i)}}catch(e){l.e(e)}finally{l.f()}return c()}function ye(e,n,t,r){ve(n,e);var i=n.runtime.bin.makeReadOptions(r),o=n.runtime.bin.makeWriteOptions(r);if(pe(e,n)){var u=e.getType().runtime.bin.listUnknownFields(e).filter(function(e){return e.no!=n.field.no});e.getType().runtime.bin.discardUnknownFields(e);var s,c=a(u);try{for(c.s();!(s=c.n()).done;){var l=s.value;e.getType().runtime.bin.onUnknownField(e,l.no,l.wireType,l.data)}}catch(e){c.e(e)}finally{c.f()}}var f=o.writerFactory(),m=n.field;m.opt||m.repeated||"enum"!=m.kind&&"scalar"!=m.kind||(m=Object.assign(Object.assign({},n.field),{opt:!0})),n.runtime.bin.writeField(m,t,f,o);for(var y=i.readerFactory(f.finish());y.pos<y.len;){var p=d(y.tag(),2),v=p[0],k=p[1],h=y.skip(k,v);e.getType().runtime.bin.onUnknownField(e,v,k,h)}}function pe(e,n){var t=e.getType();return n.extendee.typeName===t.typeName&&!!t.runtime.bin.listUnknownFields(e).find(function(e){return e.no==n.field.no})}function ve(e,n){A(e.extendee.typeName==n.getType().typeName,"extension ".concat(e.typeName," can only be applied to message ").concat(e.extendee.typeName))}function ke(e,n){var t=e.localName;if(e.repeated)return n[t].length>0;if(e.oneof)return n[e.oneof.localName].case===t;switch(e.kind){case"enum":case"scalar":return e.opt||e.req?void 0!==n[t]:"enum"==e.kind?n[t]!==e.T.values[0].no:!ie(e.T,n[t]);case"message":return void 0!==n[t];case"map":return Object.keys(n[t]).length>0}}function he(e,n){var t=e.localName,r=!e.opt&&!e.req;if(e.repeated)n[t]=[];else if(e.oneof)n[e.oneof.localName]={case:void 0};else switch(e.kind){case"map":n[t]={};break;case"enum":n[t]=r?e.T.values[0].no:void 0;break;case"scalar":n[t]=r?re(e.T,e.L):void 0;break;case"message":n[t]=void 0}}function ge(e,n){if(null===e||"object"!=p(e))return!1;if(!Object.getOwnPropertyNames(M.prototype).every(function(n){return n in e&&"function"==typeof e[n]}))return!1;var t=e.getType();return null!==t&&"function"==typeof t&&"typeName"in t&&"string"==typeof t.typeName&&(void 0===n||t.typeName==n.typeName)}function Te(e,n){return ge(n)||!e.fieldWrapper?n:e.fieldWrapper.wrapField(n)}Z.DOUBLE,Z.FLOAT,Z.INT64,Z.UINT64,Z.INT32,Z.UINT32,Z.BOOL,Z.STRING,Z.BYTES;var we={ignoreUnknownFields:!1},Se={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function be(e){return e?Object.assign(Object.assign({},we),e):we}function Ee(e){return e?Object.assign(Object.assign({},Se),e):Se}var Ne=Symbol(),Ie=Symbol();function _e(e){if(null===e)return"null";switch(p(e)){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":'"'.concat(e.split('"').join('\\"'),'"');default:return String(e)}}function Oe(e,n,t,r,i){var o=t.localName;if(t.repeated){if(A("map"!=t.kind),null===n)return;if(!Array.isArray(n))throw new Error("cannot decode field ".concat(i.typeName,".").concat(t.name," from JSON: ").concat(_e(n)));var u,s=e[o],c=a(n);try{for(c.s();!(u=c.n()).done;){var l=u.value;if(null===l)throw new Error("cannot decode field ".concat(i.typeName,".").concat(t.name," from JSON: ").concat(_e(l)));switch(t.kind){case"message":s.push(t.T.fromJson(l,r));break;case"enum":var f=Ce(t.T,l,r.ignoreUnknownFields,!0);f!==Ie&&s.push(f);break;case"scalar":try{s.push(Ae(t.T,l,t.L,!0))}catch(e){var m="cannot decode field ".concat(i.typeName,".").concat(t.name," from JSON: ").concat(_e(l));throw e instanceof Error&&e.message.length>0&&(m+=": ".concat(e.message)),new Error(m)}}}}catch(e){c.e(e)}finally{c.f()}}else if("map"==t.kind){if(null===n)return;if("object"!=p(n)||Array.isArray(n))throw new Error("cannot decode field ".concat(i.typeName,".").concat(t.name," from JSON: ").concat(_e(n)));for(var y=e[o],v=0,k=Object.entries(n);v<k.length;v++){var h=d(k[v],2),g=h[0],T=h[1];if(null===T)throw new Error("cannot decode field ".concat(i.typeName,".").concat(t.name," from JSON: map value null"));var w=void 0;try{w=Le(t.K,g)}catch(e){var S="cannot decode map key for field ".concat(i.typeName,".").concat(t.name," from JSON: ").concat(_e(n));throw e instanceof Error&&e.message.length>0&&(S+=": ".concat(e.message)),new Error(S)}switch(t.V.kind){case"message":y[w]=t.V.T.fromJson(T,r);break;case"enum":var b=Ce(t.V.T,T,r.ignoreUnknownFields,!0);b!==Ie&&(y[w]=b);break;case"scalar":try{y[w]=Ae(t.V.T,T,$.BIGINT,!0)}catch(e){var E="cannot decode map value for field ".concat(i.typeName,".").concat(t.name," from JSON: ").concat(_e(n));throw e instanceof Error&&e.message.length>0&&(E+=": ".concat(e.message)),new Error(E)}}}}else switch(t.oneof&&(e=e[t.oneof.localName]={case:o},o="value"),t.kind){case"message":var N=t.T;if(null===n&&"google.protobuf.Value"!=N.typeName)return;var I=e[o];ge(I)?I.fromJson(n,r):(e[o]=I=N.fromJson(n,r),N.fieldWrapper&&!t.oneof&&(e[o]=N.fieldWrapper.unwrapField(I)));break;case"enum":var _=Ce(t.T,n,r.ignoreUnknownFields,!1);switch(_){case Ne:he(t,e);break;case Ie:break;default:e[o]=_}break;case"scalar":try{var O=Ae(t.T,n,t.L,!1);if(O===Ne)he(t,e);else e[o]=O}catch(e){var L="cannot decode field ".concat(i.typeName,".").concat(t.name," from JSON: ").concat(_e(n));throw e instanceof Error&&e.message.length>0&&(L+=": ".concat(e.message)),new Error(L)}}}function Le(e,n){if(e===Z.BOOL)switch(n){case"true":n=!0;break;case"false":n=!1}return Ae(e,n,$.BIGINT,!0).toString()}function Ae(e,n,t,r){if(null===n)return r?re(e,t):Ne;switch(e){case Z.DOUBLE:case Z.FLOAT:if("NaN"===n)return Number.NaN;if("Infinity"===n)return Number.POSITIVE_INFINITY;if("-Infinity"===n)return Number.NEGATIVE_INFINITY;if(""===n)break;if("string"==typeof n&&n.trim().length!==n.length)break;if("string"!=typeof n&&"number"!=typeof n)break;var i=Number(n);if(Number.isNaN(i))break;if(!Number.isFinite(i))break;return e==Z.FLOAT&&R(i),i;case Z.INT32:case Z.FIXED32:case Z.SFIXED32:case Z.SINT32:case Z.UINT32:var a;if("number"==typeof n?a=n:"string"==typeof n&&n.length>0&&n.trim().length===n.length&&(a=Number(n)),void 0===a)break;return e==Z.UINT32||e==Z.FIXED32?J(a):C(a),a;case Z.INT64:case Z.SFIXED64:case Z.SINT64:if("number"!=typeof n&&"string"!=typeof n)break;var o=ne.parse(n);return t?o.toString():o;case Z.FIXED64:case Z.UINT64:if("number"!=typeof n&&"string"!=typeof n)break;var u=ne.uParse(n);return t?u.toString():u;case Z.BOOL:if("boolean"!=typeof n)break;return n;case Z.STRING:if("string"!=typeof n)break;try{encodeURIComponent(n)}catch(e){throw new Error("invalid UTF8")}return n;case Z.BYTES:if(""===n)return new Uint8Array(0);if("string"!=typeof n)break;return fe(n)}throw new Error}function Ce(e,n,t,r){if(null===n)return"google.protobuf.NullValue"==e.typeName?0:r?e.values[0].no:Ne;switch(p(n)){case"number":if(Number.isInteger(n))return n;break;case"string":var i=e.findName(n);if(void 0!==i)return i.no;if(t)return Ie}throw new Error("cannot decode enum ".concat(e.typeName," from JSON: ").concat(_e(n)))}function Je(e){return!(!e.repeated&&"map"!=e.kind)||!e.oneof&&("message"!=e.kind&&(!e.opt&&!e.req))}function Re(e,n,t){if("map"==e.kind){A("object"==p(n)&&null!=n);var r={},i=Object.entries(n);switch(e.V.kind){case"scalar":var o,u=a(i);try{for(u.s();!(o=u.n()).done;){var s=d(o.value,2),c=s[0],l=s[1];r[c.toString()]=De(e.V.T,l)}}catch(e){u.e(e)}finally{u.f()}break;case"message":var f,m=a(i);try{for(m.s();!(f=m.n()).done;){var y=d(f.value,2),v=y[0],k=y[1];r[v.toString()]=k.toJson(t)}}catch(e){m.e(e)}finally{m.f()}break;case"enum":var h,g=e.V.T,T=a(i);try{for(T.s();!(h=T.n()).done;){var w=d(h.value,2),S=w[0],b=w[1];r[S.toString()]=Pe(g,b,t.enumAsInteger)}}catch(e){T.e(e)}finally{T.f()}}return t.emitDefaultValues||i.length>0?r:void 0}if(e.repeated){A(Array.isArray(n));var E=[];switch(e.kind){case"scalar":for(var N=0;N<n.length;N++)E.push(De(e.T,n[N]));break;case"enum":for(var I=0;I<n.length;I++)E.push(Pe(e.T,n[I],t.enumAsInteger));break;case"message":for(var _=0;_<n.length;_++)E.push(n[_].toJson(t))}return t.emitDefaultValues||E.length>0?E:void 0}switch(e.kind){case"scalar":return De(e.T,n);case"enum":return Pe(e.T,n,t.enumAsInteger);case"message":return Te(e.T,n).toJson(t)}}function Pe(e,n,t){var r;if(A("number"==typeof n),"google.protobuf.NullValue"==e.typeName)return null;if(t)return n;var i=e.findNumber(n);return null!==(r=null==i?void 0:i.name)&&void 0!==r?r:n}function De(e,n){switch(e){case Z.INT32:case Z.SFIXED32:case Z.SINT32:case Z.FIXED32:case Z.UINT32:return A("number"==typeof n),n;case Z.FLOAT:case Z.DOUBLE:return A("number"==typeof n),Number.isNaN(n)?"NaN":n===Number.POSITIVE_INFINITY?"Infinity":n===Number.NEGATIVE_INFINITY?"-Infinity":n;case Z.STRING:return A("string"==typeof n),n;case Z.BOOL:return A("boolean"==typeof n),n;case Z.UINT64:case Z.FIXED64:case Z.INT64:case Z.SFIXED64:case Z.SINT64:return A("bigint"==typeof n||"string"==typeof n||"number"==typeof n),n.toString();case Z.BYTES:return A(n instanceof Uint8Array),de(n)}}var Ue=Symbol("@bufbuild/protobuf/unknown-fields"),Fe={readUnknownFields:!0,readerFactory:function(e){return new oe(e)}},Be={writeUnknownFields:!0,writerFactory:function(){return new ae}};function qe(e){return e?Object.assign(Object.assign({},Fe),e):Fe}function Me(e){return e?Object.assign(Object.assign({},Be),e):Be}function xe(e,n,t,r,i){var a=t.repeated,o=t.localName;switch(t.oneof&&((e=e[t.oneof.localName]).case!=o&&delete e.value,e.case=o,o="value"),t.kind){case"scalar":case"enum":var u="enum"==t.kind?Z.INT32:t.T,s=je;if("scalar"==t.kind&&t.L>0&&(s=Ve),a){var c=e[o];if(r==ee.LengthDelimited&&u!=Z.STRING&&u!=Z.BYTES)for(var l=n.uint32()+n.pos;n.pos<l;)c.push(s(n,u));else c.push(s(n,u))}else e[o]=s(n,u);break;case"message":var f=t.T;a?e[o].push(Ke(n,new f,i,t)):ge(e[o])?Ke(n,e[o],i,t):(e[o]=Ke(n,new f,i,t),!f.fieldWrapper||t.oneof||t.repeated||(e[o]=f.fieldWrapper.unwrapField(e[o])));break;case"map":var m=function(e,n,t){var r,i,a=n.uint32(),o=n.pos+a;for(;n.pos<o;){switch(d(n.tag(),1)[0]){case 1:r=je(n,e.K);break;case 2:switch(e.V.kind){case"scalar":i=je(n,e.V.T);break;case"enum":i=n.int32();break;case"message":i=Ke(n,new e.V.T,t,void 0)}}}void 0===r&&(r=re(e.K,$.BIGINT));"string"!=typeof r&&"number"!=typeof r&&(r=r.toString());if(void 0===i)switch(e.V.kind){case"scalar":i=re(e.V.T,$.BIGINT);break;case"enum":i=e.V.T.values[0].no;break;case"message":i=new e.V.T}return[r,i]}(t,n,i),y=d(m,2),p=y[0],v=y[1];e[o][p]=v}}function Ke(e,n,t,r){var i=n.getType().runtime.bin,a=null==r?void 0:r.delimited;return i.readMessage(n,e,a?r.no:e.uint32(),t,a),n}function Ve(e,n){var t=je(e,n);return"bigint"==typeof t?t.toString():t}function je(e,n){switch(n){case Z.STRING:return e.string();case Z.BOOL:return e.bool();case Z.DOUBLE:return e.double();case Z.FLOAT:return e.float();case Z.INT32:return e.int32();case Z.INT64:return e.int64();case Z.UINT64:return e.uint64();case Z.FIXED64:return e.fixed64();case Z.BYTES:return e.bytes();case Z.FIXED32:return e.fixed32();case Z.SFIXED32:return e.sfixed32();case Z.SFIXED64:return e.sfixed64();case Z.SINT64:return e.sint64();case Z.UINT32:return e.uint32();case Z.SINT32:return e.sint32()}}function Ge(e,n,t,r){A(void 0!==n);var i=e.repeated;switch(e.kind){case"scalar":case"enum":var o="enum"==e.kind?Z.INT32:e.T;if(i)if(A(Array.isArray(n)),e.packed)!function(e,n,t,r){if(!r.length)return;e.tag(t,ee.LengthDelimited).fork();for(var i=d(Xe(n),2)[1],a=0;a<r.length;a++)e[i](r[a]);e.join()}(t,o,e.no,n);else{var u,s=a(n);try{for(s.s();!(u=s.n()).done;){var c=u.value;ze(t,o,e.no,c)}}catch(e){s.e(e)}finally{s.f()}}else ze(t,o,e.no,n);break;case"message":if(i){A(Array.isArray(n));var l,f=a(n);try{for(f.s();!(l=f.n()).done;){We(t,r,e,l.value)}}catch(e){f.e(e)}finally{f.f()}}else We(t,r,e,n);break;case"map":A("object"==p(n)&&null!=n);for(var m=0,y=Object.entries(n);m<y.length;m++){var v=d(y[m],2);He(t,r,e,v[0],v[1])}}}function He(e,n,t,r,i){e.tag(t.no,ee.LengthDelimited),e.fork();var a=r;switch(t.K){case Z.INT32:case Z.FIXED32:case Z.UINT32:case Z.SFIXED32:case Z.SINT32:a=Number.parseInt(r);break;case Z.BOOL:A("true"==r||"false"==r),a="true"==r}switch(ze(e,t.K,1,a),t.V.kind){case"scalar":ze(e,t.V.T,2,i);break;case"enum":ze(e,Z.INT32,2,i);break;case"message":A(void 0!==i),e.tag(2,ee.LengthDelimited).bytes(i.toBinary(n))}e.join()}function We(e,n,t,r){var i=Te(t.T,r);t.delimited?e.tag(t.no,ee.StartGroup).raw(i.toBinary(n)).tag(t.no,ee.EndGroup):e.tag(t.no,ee.LengthDelimited).bytes(i.toBinary(n))}function ze(e,n,t,r){A(void 0!==r);var i=d(Xe(n),2),a=i[0],o=i[1];e.tag(t,a)[o](r)}function Xe(e){var n=ee.Varint;switch(e){case Z.BYTES:case Z.STRING:n=ee.LengthDelimited;break;case Z.DOUBLE:case Z.FIXED64:case Z.SFIXED64:n=ee.Bit64;break;case Z.FIXED32:case Z.SFIXED32:case Z.FLOAT:n=ee.Bit32}return[n,Z[e].toLowerCase()]}function Ye(e){if(void 0===e)return e;if(ge(e))return e.clone();if(e instanceof Uint8Array){var n=new Uint8Array(e.byteLength);return n.set(e),n}return e}function Qe(e){return e instanceof Uint8Array?e:new Uint8Array(e)}var Ze=function(){return i(function e(n,r){t(this,e),this._fields=n,this._normalizer=r},[{key:"findJsonName",value:function(e){if(!this.jsonNames){var n,t={},r=a(this.list());try{for(r.s();!(n=r.n()).done;){var i=n.value;t[i.jsonName]=t[i.name]=i}}catch(e){r.e(e)}finally{r.f()}this.jsonNames=t}return this.jsonNames[e]}},{key:"find",value:function(e){if(!this.numbers){var n,t={},r=a(this.list());try{for(r.s();!(n=r.n()).done;){var i=n.value;t[i.no]=i}}catch(e){r.e(e)}finally{r.f()}this.numbers=t}return this.numbers[e]}},{key:"list",value:function(){return this.all||(this.all=this._normalizer(this._fields)),this.all}},{key:"byNumber",value:function(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort(function(e,n){return e.no-n.no})),this.numbersAsc}},{key:"byMember",value:function(){if(!this.members){this.members=[];var e,n,t=this.members,r=a(this.list());try{for(r.s();!(n=r.n()).done;){var i=n.value;i.oneof?i.oneof!==e&&(e=i.oneof,t.push(e)):t.push(i)}}catch(e){r.e(e)}finally{r.f()}}return this.members}}])}();function $e(e,n){var t=nn(e);return n?t:un(on(t))}var en=nn;function nn(e){for(var n=!1,t=[],r=0;r<e.length;r++){var i=e.charAt(r);switch(i){case"_":n=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":t.push(i),n=!1;break;default:n&&(n=!1,i=i.toUpperCase()),t.push(i)}}return t.join("")}var tn=new Set(["constructor","toString","toJSON","valueOf"]),rn=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),an=function(e){return"".concat(e,"$")},on=function(e){return rn.has(e)?an(e):e},un=function(e){return tn.has(e)?an(e):e},sn=function(){return i(function e(n){t(this,e),this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=n,this.localName=$e(n,!1)},[{key:"addField",value:function(e){A(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}},{key:"findField",value:function(e){if(!this._lookup){this._lookup=Object.create(null);for(var n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}])}();var cn,ln,fn=(cn=function(e){return new Ze(e,function(e){return function(e,n){var t,r,i,o,u,s,c,l,f=[],d=a("function"==typeof e?e():e);try{for(d.s();!(l=d.n()).done;){var m=l.value,y=m;if(y.localName=$e(m.name,void 0!==m.oneof),y.jsonName=null!==(t=m.jsonName)&&void 0!==t?t:en(m.name),y.repeated=null!==(r=m.repeated)&&void 0!==r&&r,"scalar"==m.kind&&(y.L=null!==(i=m.L)&&void 0!==i?i:$.BIGINT),y.delimited=null!==(o=m.delimited)&&void 0!==o&&o,y.req=null!==(u=m.req)&&void 0!==u&&u,y.opt=null!==(s=m.opt)&&void 0!==s&&s,void 0===m.packed&&n&&(y.packed="enum"==m.kind||"scalar"==m.kind&&m.T!=Z.BYTES&&m.T!=Z.STRING),void 0!==m.oneof){var p="string"==typeof m.oneof?m.oneof:m.oneof.name;c&&c.name==p||(c=new sn(p)),y.oneof=c,c.addField(y)}f.push(y)}}catch(e){d.e(e)}finally{d.f()}return f}(e,!0)})},ln=function(e){var n,t=a(e.getType().fields.byMember());try{for(t.s();!(n=t.n()).done;){var r=n.value;if(!r.opt){var i=r.localName,o=e;if(r.repeated)o[i]=[];else switch(r.kind){case"oneof":o[i]={case:void 0};break;case"enum":o[i]=0;break;case"map":o[i]={};break;case"scalar":o[i]=re(r.T,r.L)}}}}catch(e){t.e(e)}finally{t.f()}},{syntax:"proto3",json:{makeReadOptions:be,makeWriteOptions:Ee,readMessage:function(e,n,t,r){if(null==n||Array.isArray(n)||"object"!=p(n))throw new Error("cannot decode message ".concat(e.typeName," from JSON: ").concat(_e(n)));r=null!=r?r:new e;for(var i=new Map,a=t.typeRegistry,o=0,u=Object.entries(n);o<u.length;o++){var s=d(u[o],2),c=s[0],l=s[1],f=e.fields.findJsonName(c);if(f){if(f.oneof){if(null===l&&"scalar"==f.kind)continue;var m=i.get(f.oneof);if(void 0!==m)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: multiple keys for oneof "').concat(f.oneof.name,'" present: "').concat(m,'", "').concat(c,'"'));i.set(f.oneof,c)}Oe(r,l,f,t,e)}else{var y=!1;if((null==a?void 0:a.findExtension)&&c.startsWith("[")&&c.endsWith("]")){var v=a.findExtension(c.substring(1,c.length-1));if(v&&v.extendee.typeName==e.typeName){y=!0;var k=d(ue(v),2),h=k[0],g=k[1];Oe(h,l,v.field,t,v),ye(r,v,g(),t)}}if(!y&&!t.ignoreUnknownFields)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: key "').concat(c,'" is unknown'))}}return r},writeMessage:function(e,n){var t,r=e.getType(),i={};try{var o,u=a(r.fields.byNumber());try{for(u.s();!(o=u.n()).done;){if(!ke(t=o.value,e)){if(t.req)throw"required field not set";if(!n.emitDefaultValues)continue;if(!Je(t))continue}var s=Re(t,t.oneof?e[t.oneof.localName].value:e[t.localName],n);void 0!==s&&(i[n.useProtoFieldName?t.name:t.jsonName]=s)}}catch(e){u.e(e)}finally{u.f()}var c=n.typeRegistry;if(null==c?void 0:c.findExtensionFor){var l,f=a(r.runtime.bin.listUnknownFields(e));try{for(f.s();!(l=f.n()).done;){var d=l.value,m=c.findExtensionFor(r.typeName,d.no);if(m&&pe(e,m)){var y=me(e,m,n),p=Re(m.field,y,n);void 0!==p&&(i[m.field.jsonName]=p)}}}catch(e){f.e(e)}finally{f.f()}}}catch(e){var v=t?"cannot encode field ".concat(r.typeName,".").concat(t.name," to JSON"):"cannot encode message ".concat(r.typeName," to JSON"),k=e instanceof Error?e.message:String(e);throw new Error(v+(k.length>0?": ".concat(k):""))}return i},readScalar:function(e,n,t){return Ae(e,n,null!=t?t:$.BIGINT,!0)},writeScalar:function(e,n,t){if(void 0!==n)return t||ie(e,n)?De(e,n):void 0},debug:_e},bin:{makeReadOptions:qe,makeWriteOptions:Me,listUnknownFields:function(e){var n;return null!==(n=e[Ue])&&void 0!==n?n:[]},discardUnknownFields:function(e){delete e[Ue]},writeUnknownFields:function(e,n){var t=e[Ue];if(t){var r,i=a(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;n.tag(o.no,o.wireType).raw(o.data)}}catch(e){i.e(e)}finally{i.f()}}},onUnknownField:function(e,n,t,r){var i=e;Array.isArray(i[Ue])||(i[Ue]=[]),i[Ue].push({no:n,wireType:t,data:r})},readMessage:function(e,n,t,r,i){for(var a,o,u=e.getType(),s=i?n.len:n.pos+t;n.pos<s;){var c=d(n.tag(),2);if(a=c[0],o=c[1],!0===i&&o==ee.EndGroup)break;var l=u.fields.find(a);if(l)xe(e,n,l,o,r);else{var f=n.skip(o,a);r.readUnknownFields&&this.onUnknownField(e,a,o,f)}}if(i&&(o!=ee.EndGroup||a!==t))throw new Error("invalid end group tag")},readField:xe,writeMessage:function(e,n,t){var r,i=e.getType(),o=a(i.fields.byNumber());try{for(o.s();!(r=o.n()).done;){var u=r.value;if(ke(u,e))Ge(u,u.oneof?e[u.oneof.localName].value:e[u.localName],n,t);else if(u.req)throw new Error("cannot encode field ".concat(i.typeName,".").concat(u.name," to binary: required field not set"))}}catch(e){o.e(e)}finally{o.f()}return t.writeUnknownFields&&this.writeUnknownFields(e,n),n},writeField:function(e,n,t,r){void 0!==n&&Ge(e,n,t,r)}},util:Object.assign(Object.assign({},{setEnumType:U,initPartial:function(e,n){if(void 0!==e){var t,r=a(n.getType().fields.byMember());try{var i=function(){var r=t.value,i=r.localName,a=n,o=e;if(null==o[i])return 0;switch(r.kind){case"oneof":var u=o[i].case;if(void 0===u)return 0;var s=r.findField(u),c=o[i].value;s&&"message"==s.kind&&!ge(c,s.T)?c=new s.T(c):s&&"scalar"===s.kind&&s.T===Z.BYTES&&(c=Qe(c)),a[i]={case:u,value:c};break;case"scalar":case"enum":var l=o[i];r.T===Z.BYTES&&(l=r.repeated?l.map(Qe):Qe(l)),a[i]=l;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===Z.BYTES)for(var f=0,m=Object.entries(o[i]);f<m.length;f++){var y=d(m[f],2),p=y[0],v=y[1];a[i][p]=Qe(v)}else Object.assign(a[i],o[i]);break;case"message":for(var k=r.V.T,h=0,g=Object.keys(o[i]);h<g.length;h++){var T=g[h],w=o[i][T];k.fieldWrapper||(w=new k(w)),a[i][T]=w}}break;case"message":var S=r.T;if(r.repeated)a[i]=o[i].map(function(e){return ge(e,S)?e:new S(e)});else{var b=o[i];S.fieldWrapper?"google.protobuf.BytesValue"===S.typeName?a[i]=Qe(b):a[i]=b:a[i]=ge(b,S)?b:new S(b)}}};for(r.s();!(t=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}}},equals:function(e,n,t){return n===t||!(!n||!t)&&e.fields.byMember().every(function(e){var r=n[e.localName],i=t[e.localName];if(e.repeated){if(r.length!==i.length)return!1;switch(e.kind){case"message":return r.every(function(n,t){return e.T.equals(n,i[t])});case"scalar":return r.every(function(n,t){return te(e.T,n,i[t])});case"enum":return r.every(function(e,n){return te(Z.INT32,e,i[n])})}throw new Error("repeated cannot contain ".concat(e.kind))}switch(e.kind){case"message":var a=r,o=i;return e.T.fieldWrapper&&(void 0===a||ge(a)||(a=e.T.fieldWrapper.wrapField(a)),void 0===o||ge(o)||(o=e.T.fieldWrapper.wrapField(o))),e.T.equals(a,o);case"enum":return te(Z.INT32,r,i);case"scalar":return te(e.T,r,i);case"oneof":if(r.case!==i.case)return!1;var u=e.findField(r.case);if(void 0===u)return!0;switch(u.kind){case"message":return u.T.equals(r.value,i.value);case"enum":return te(Z.INT32,r.value,i.value);case"scalar":return te(u.T,r.value,i.value)}throw new Error("oneof cannot contain ".concat(u.kind));case"map":var s=Object.keys(r).concat(Object.keys(i));switch(e.V.kind){case"message":var c=e.V.T;return s.every(function(e){return c.equals(r[e],i[e])});case"enum":return s.every(function(e){return te(Z.INT32,r[e],i[e])});case"scalar":var l=e.V.T;return s.every(function(e){return te(l,r[e],i[e])})}}})},clone:function(e){var n,t=e.getType(),r=new t,i=r,o=a(t.fields.byMember());try{for(o.s();!(n=o.n()).done;){var u=n.value,s=e[u.localName],c=void 0;if(u.repeated)c=s.map(Ye);else if("map"==u.kind){c=i[u.localName];for(var l=0,f=Object.entries(s);l<f.length;l++){var m=d(f[l],2),y=m[0],p=m[1];c[y]=Ye(p)}}else c="oneof"==u.kind?u.findField(s.case)?{case:s.case,value:Ye(s.value)}:{case:void 0}:Ye(s);i[u.localName]=c}}catch(e){o.e(e)}finally{o.f()}var v,k=a(t.runtime.bin.listUnknownFields(e));try{for(k.s();!(v=k.n()).done;){var h=v.value;t.runtime.bin.onUnknownField(i,h.no,h.wireType,h.data)}}catch(e){k.e(e)}finally{k.f()}return r}}),{newFieldList:cn,initFields:ln}),makeMessageType:function(e,n,t){return x(this,e,n,t)},makeEnum:B,makeEnumType:F,getEnumType:D,makeExtension:function(e,n,t){return function(e,n,t,r){var i;return{typeName:n,extendee:t,get field(){if(!i){var t="function"==typeof r?r():r;t.name=n.split(".").pop(),t.jsonName="[".concat(n,"]"),i=e.util.newFieldList([t]).list()[0]}return i},runtime:e}}(this,e,n,t)}}),dn=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).seconds=ne.zero,i.nanos=0,fn.util.initPartial(e,i),i}return u(r,e),i(r,[{key:"fromJson",value:function(e,n){if("string"!=typeof e)throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(fn.json.debug(e)));var t=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!t)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");var r=Date.parse(t[1]+"-"+t[2]+"-"+t[3]+"T"+t[4]+":"+t[5]+":"+t[6]+(t[8]?t[8]:"Z"));if(Number.isNaN(r))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=ne.parse(r/1e3),this.nanos=0,t[7]&&(this.nanos=parseInt("1"+t[7]+"0".repeat(9-t[7].length))-1e9),this}},{key:"toJson",value:function(e){var n=1e3*Number(this.seconds);if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");var t="Z";if(this.nanos>0){var r=(this.nanos+1e9).toString().substring(1);t="000000"===r.substring(3)?"."+r.substring(0,3)+"Z":"000"===r.substring(6)?"."+r.substring(0,6)+"Z":"."+r+"Z"}return new Date(n).toISOString().replace(".000Z",t)}},{key:"toDate",value:function(){return new Date(1e3*Number(this.seconds)+Math.ceil(this.nanos/1e6))}}],[{key:"now",value:function(){return r.fromDate(new Date)}},{key:"fromDate",value:function(e){var n=e.getTime();return new r({seconds:ne.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}},{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);dn.runtime=fn,dn.typeName="google.protobuf.Timestamp",dn.fields=fn.util.newFieldList(function(){return[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]});var mn,yn,pn,vn,kn,hn,gn,Tn,wn,Sn,bn,En,Nn=fn.makeMessageType("livekit.MetricsBatch",function(){return[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:dn},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:In,repeated:!0},{no:5,name:"events",kind:"message",T:On,repeated:!0}]}),In=fn.makeMessageType("livekit.TimeSeriesMetric",function(){return[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:_n,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]}),_n=fn.makeMessageType("livekit.MetricSample",function(){return[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:dn},{no:3,name:"value",kind:"scalar",T:2}]}),On=fn.makeMessageType("livekit.EventMetric",function(){return[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:dn},{no:7,name:"normalized_end_timestamp",kind:"message",T:dn,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]});!function(e){e[e.DEFAULT_AC=0]="DEFAULT_AC",e[e.OPUS=1]="OPUS",e[e.AAC=2]="AAC"}(mn||(mn={})),fn.util.setEnumType(mn,"livekit.AudioCodec",[{no:0,name:"DEFAULT_AC"},{no:1,name:"OPUS"},{no:2,name:"AAC"}]),function(e){e[e.DEFAULT_VC=0]="DEFAULT_VC",e[e.H264_BASELINE=1]="H264_BASELINE",e[e.H264_MAIN=2]="H264_MAIN",e[e.H264_HIGH=3]="H264_HIGH",e[e.VP8=4]="VP8"}(yn||(yn={})),fn.util.setEnumType(yn,"livekit.VideoCodec",[{no:0,name:"DEFAULT_VC"},{no:1,name:"H264_BASELINE"},{no:2,name:"H264_MAIN"},{no:3,name:"H264_HIGH"},{no:4,name:"VP8"}]),function(e){e[e.IC_DEFAULT=0]="IC_DEFAULT",e[e.IC_JPEG=1]="IC_JPEG"}(pn||(pn={})),fn.util.setEnumType(pn,"livekit.ImageCodec",[{no:0,name:"IC_DEFAULT"},{no:1,name:"IC_JPEG"}]),function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO=1]="VIDEO",e[e.DATA=2]="DATA"}(vn||(vn={})),fn.util.setEnumType(vn,"livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CAMERA=1]="CAMERA",e[e.MICROPHONE=2]="MICROPHONE",e[e.SCREEN_SHARE=3]="SCREEN_SHARE",e[e.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO"}(kn||(kn={})),fn.util.setEnumType(kn,"livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH",e[e.OFF=3]="OFF"}(hn||(hn={})),fn.util.setEnumType(hn,"livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),function(e){e[e.POOR=0]="POOR",e[e.GOOD=1]="GOOD",e[e.EXCELLENT=2]="EXCELLENT",e[e.LOST=3]="LOST"}(gn||(gn={})),fn.util.setEnumType(gn,"livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),function(e){e[e.UNSET=0]="UNSET",e[e.DISABLED=1]="DISABLED",e[e.ENABLED=2]="ENABLED"}(Tn||(Tn={})),fn.util.setEnumType(Tn,"livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),function(e){e[e.UNKNOWN_REASON=0]="UNKNOWN_REASON",e[e.CLIENT_INITIATED=1]="CLIENT_INITIATED",e[e.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",e[e.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",e[e.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",e[e.ROOM_DELETED=5]="ROOM_DELETED",e[e.STATE_MISMATCH=6]="STATE_MISMATCH",e[e.JOIN_FAILURE=7]="JOIN_FAILURE",e[e.MIGRATION=8]="MIGRATION",e[e.SIGNAL_CLOSE=9]="SIGNAL_CLOSE",e[e.ROOM_CLOSED=10]="ROOM_CLOSED",e[e.USER_UNAVAILABLE=11]="USER_UNAVAILABLE",e[e.USER_REJECTED=12]="USER_REJECTED",e[e.SIP_TRUNK_FAILURE=13]="SIP_TRUNK_FAILURE"}(wn||(wn={})),fn.util.setEnumType(wn,"livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"}]),function(e){e[e.RR_UNKNOWN=0]="RR_UNKNOWN",e[e.RR_SIGNAL_DISCONNECTED=1]="RR_SIGNAL_DISCONNECTED",e[e.RR_PUBLISHER_FAILED=2]="RR_PUBLISHER_FAILED",e[e.RR_SUBSCRIBER_FAILED=3]="RR_SUBSCRIBER_FAILED",e[e.RR_SWITCH_CANDIDATE=4]="RR_SWITCH_CANDIDATE"}(Sn||(Sn={})),fn.util.setEnumType(Sn,"livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),function(e){e[e.SE_UNKNOWN=0]="SE_UNKNOWN",e[e.SE_CODEC_UNSUPPORTED=1]="SE_CODEC_UNSUPPORTED",e[e.SE_TRACK_NOTFOUND=2]="SE_TRACK_NOTFOUND"}(bn||(bn={})),fn.util.setEnumType(bn,"livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),function(e){e[e.TF_STEREO=0]="TF_STEREO",e[e.TF_NO_DTX=1]="TF_NO_DTX",e[e.TF_AUTO_GAIN_CONTROL=2]="TF_AUTO_GAIN_CONTROL",e[e.TF_ECHO_CANCELLATION=3]="TF_ECHO_CANCELLATION",e[e.TF_NOISE_SUPPRESSION=4]="TF_NOISE_SUPPRESSION",e[e.TF_ENHANCED_NOISE_CANCELLATION=5]="TF_ENHANCED_NOISE_CANCELLATION"}(En||(En={})),fn.util.setEnumType(En,"livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"}]);var Ln=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).sid="",i.name="",i.emptyTimeout=0,i.departureTimeout=0,i.maxParticipants=0,i.creationTime=ne.zero,i.turnPassword="",i.enabledCodecs=[],i.metadata="",i.numParticipants=0,i.numPublishers=0,i.activeRecording=!1,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Ln.runtime=fn,Ln.typeName="livekit.Room",Ln.fields=fn.util.newFieldList(function(){return[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:An,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:yt}]});var An=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).mime="",i.fmtpLine="",fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);An.runtime=fn,An.typeName="livekit.Codec",An.fields=fn.util.newFieldList(function(){return[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]});var Cn=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).enabled=!1,i.min=0,i.max=0,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Cn.runtime=fn,Cn.typeName="livekit.PlayoutDelay",Cn.fields=fn.util.newFieldList(function(){return[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"min",kind:"scalar",T:13},{no:3,name:"max",kind:"scalar",T:13}]});var Jn=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).canSubscribe=!1,i.canPublish=!1,i.canPublishData=!1,i.canPublishSources=[],i.hidden=!1,i.recorder=!1,i.canUpdateMetadata=!1,i.agent=!1,i.canSubscribeMetrics=!1,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Jn.runtime=fn,Jn.typeName="livekit.ParticipantPermission",Jn.fields=fn.util.newFieldList(function(){return[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:fn.getEnumType(kn),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]});var Rn,Pn,Dn=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).sid="",i.identity="",i.state=Rn.JOINING,i.tracks=[],i.metadata="",i.joinedAt=ne.zero,i.name="",i.version=0,i.region="",i.isPublisher=!1,i.kind=Pn.STANDARD,i.attributes={},i.disconnectReason=wn.UNKNOWN_REASON,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Dn.runtime=fn,Dn.typeName="livekit.ParticipantInfo",Dn.fields=fn.util.newFieldList(function(){return[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:fn.getEnumType(Rn)},{no:4,name:"tracks",kind:"message",T:qn,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:Jn},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:fn.getEnumType(Pn)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:fn.getEnumType(wn)}]}),function(e){e[e.JOINING=0]="JOINING",e[e.JOINED=1]="JOINED",e[e.ACTIVE=2]="ACTIVE",e[e.DISCONNECTED=3]="DISCONNECTED"}(Rn||(Rn={})),fn.util.setEnumType(Rn,"livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),function(e){e[e.STANDARD=0]="STANDARD",e[e.INGRESS=1]="INGRESS",e[e.EGRESS=2]="EGRESS",e[e.SIP=3]="SIP",e[e.AGENT=4]="AGENT"}(Pn||(Pn={})),fn.util.setEnumType(Pn,"livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]);var Un,Fn=function(e){function r(e){var i;return t(this,r),i=n(this,r),fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Fn.runtime=fn,Fn.typeName="livekit.Encryption",Fn.fields=fn.util.newFieldList(function(){return[]}),function(e){e[e.NONE=0]="NONE",e[e.GCM=1]="GCM",e[e.CUSTOM=2]="CUSTOM"}(Un||(Un={})),fn.util.setEnumType(Un,"livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]);var Bn=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).mimeType="",i.mid="",i.cid="",i.layers=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Bn.runtime=fn,Bn.typeName="livekit.SimulcastCodecInfo",Bn.fields=fn.util.newFieldList(function(){return[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Mn,repeated:!0}]});var qn=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).sid="",i.type=vn.AUDIO,i.name="",i.muted=!1,i.width=0,i.height=0,i.simulcast=!1,i.disableDtx=!1,i.source=kn.UNKNOWN,i.layers=[],i.mimeType="",i.mid="",i.codecs=[],i.stereo=!1,i.disableRed=!1,i.encryption=Un.NONE,i.stream="",i.audioFeatures=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);qn.runtime=fn,qn.typeName="livekit.TrackInfo",qn.fields=fn.util.newFieldList(function(){return[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:fn.getEnumType(vn)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:fn.getEnumType(kn)},{no:10,name:"layers",kind:"message",T:Mn,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:Bn,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:fn.getEnumType(Un)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:yt},{no:19,name:"audio_features",kind:"enum",T:fn.getEnumType(En),repeated:!0}]});var Mn=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).quality=hn.LOW,i.width=0,i.height=0,i.bitrate=0,i.ssrc=0,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Mn.runtime=fn,Mn.typeName="livekit.VideoLayer",Mn.fields=fn.util.newFieldList(function(){return[{no:1,name:"quality",kind:"enum",T:fn.getEnumType(hn)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}]});var xn,Kn=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).kind=xn.RELIABLE,i.participantIdentity="",i.destinationIdentities=[],i.value={case:void 0},fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Kn.runtime=fn,Kn.typeName="livekit.DataPacket",Kn.fields=fn.util.newFieldList(function(){return[{no:1,name:"kind",kind:"enum",T:fn.getEnumType(xn)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:Gn,oneof:"value"},{no:3,name:"speaker",kind:"message",T:Vn,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:Hn,oneof:"value"},{no:7,name:"transcription",kind:"message",T:Wn,oneof:"value"},{no:8,name:"metrics",kind:"message",T:Nn,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:Xn,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:Yn,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:Qn,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:Zn,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:gt,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:Tt,oneof:"value"}]}),function(e){e[e.RELIABLE=0]="RELIABLE",e[e.LOSSY=1]="LOSSY"}(xn||(xn={})),fn.util.setEnumType(xn,"livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]);var Vn=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).speakers=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Vn.runtime=fn,Vn.typeName="livekit.ActiveSpeakerUpdate",Vn.fields=fn.util.newFieldList(function(){return[{no:1,name:"speakers",kind:"message",T:jn,repeated:!0}]});var jn=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).sid="",i.level=0,i.active=!1,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);jn.runtime=fn,jn.typeName="livekit.SpeakerInfo",jn.fields=fn.util.newFieldList(function(){return[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]});var Gn=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).participantSid="",i.participantIdentity="",i.payload=new Uint8Array(0),i.destinationSids=[],i.destinationIdentities=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Gn.runtime=fn,Gn.typeName="livekit.UserPacket",Gn.fields=fn.util.newFieldList(function(){return[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0}]});var Hn=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).code=0,i.digit="",fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Hn.runtime=fn,Hn.typeName="livekit.SipDTMF",Hn.fields=fn.util.newFieldList(function(){return[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]});var Wn=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).transcribedParticipantIdentity="",i.trackId="",i.segments=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Wn.runtime=fn,Wn.typeName="livekit.Transcription",Wn.fields=fn.util.newFieldList(function(){return[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:zn,repeated:!0}]});var zn=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).id="",i.text="",i.startTime=ne.zero,i.endTime=ne.zero,i.final=!1,i.language="",i.error=!1,i.failureReason="",fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);zn.runtime=fn,zn.typeName="livekit.TranscriptionSegment",zn.fields=fn.util.newFieldList(function(){return[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9},{no:7,name:"error",kind:"scalar",T:8},{no:8,name:"failure_reason",kind:"scalar",T:9}]});var Xn=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).id="",i.timestamp=ne.zero,i.message="",i.deleted=!1,i.generated=!1,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Xn.runtime=fn,Xn.typeName="livekit.ChatMessage",Xn.fields=fn.util.newFieldList(function(){return[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]});var Yn=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).id="",i.method="",i.payload="",i.responseTimeoutMs=0,i.version=0,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Yn.runtime=fn,Yn.typeName="livekit.RpcRequest",Yn.fields=fn.util.newFieldList(function(){return[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]});var Qn=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).requestId="",fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Qn.runtime=fn,Qn.typeName="livekit.RpcAck",Qn.fields=fn.util.newFieldList(function(){return[{no:1,name:"request_id",kind:"scalar",T:9}]});var Zn=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).requestId="",i.value={case:void 0},fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Zn.runtime=fn,Zn.typeName="livekit.RpcResponse",Zn.fields=fn.util.newFieldList(function(){return[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:$n,oneof:"value"}]});var $n=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).code=0,i.message="",i.data="",fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);$n.runtime=fn,$n.typeName="livekit.RpcError",$n.fields=fn.util.newFieldList(function(){return[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]});var et=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).participantSid="",i.trackSids=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);et.runtime=fn,et.typeName="livekit.ParticipantTracks",et.fields=fn.util.newFieldList(function(){return[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]});var nt,tt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).edition=nt.Standard,i.version="",i.protocol=0,i.region="",i.nodeId="",i.debugInfo="",i.agentProtocol=0,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);tt.runtime=fn,tt.typeName="livekit.ServerInfo",tt.fields=fn.util.newFieldList(function(){return[{no:1,name:"edition",kind:"enum",T:fn.getEnumType(nt)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]}),function(e){e[e.Standard=0]="Standard",e[e.Cloud=1]="Cloud"}(nt||(nt={})),fn.util.setEnumType(nt,"livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]);var rt,it=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).sdk=rt.UNKNOWN,i.version="",i.protocol=0,i.os="",i.osVersion="",i.deviceModel="",i.browser="",i.browserVersion="",i.address="",i.network="",i.otherSdks="",fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);it.runtime=fn,it.typeName="livekit.ClientInfo",it.fields=fn.util.newFieldList(function(){return[{no:1,name:"sdk",kind:"enum",T:fn.getEnumType(rt)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]}),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JS=1]="JS",e[e.SWIFT=2]="SWIFT",e[e.ANDROID=3]="ANDROID",e[e.FLUTTER=4]="FLUTTER",e[e.GO=5]="GO",e[e.UNITY=6]="UNITY",e[e.REACT_NATIVE=7]="REACT_NATIVE",e[e.RUST=8]="RUST",e[e.PYTHON=9]="PYTHON",e[e.CPP=10]="CPP",e[e.UNITY_WEB=11]="UNITY_WEB",e[e.NODE=12]="NODE"}(rt||(rt={})),fn.util.setEnumType(rt,"livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"}]);var at=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).resumeConnection=Tn.UNSET,i.forceRelay=Tn.UNSET,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);at.runtime=fn,at.typeName="livekit.ClientConfiguration",at.fields=fn.util.newFieldList(function(){return[{no:1,name:"video",kind:"message",T:ot},{no:2,name:"screen",kind:"message",T:ot},{no:3,name:"resume_connection",kind:"enum",T:fn.getEnumType(Tn)},{no:4,name:"disabled_codecs",kind:"message",T:ut},{no:5,name:"force_relay",kind:"enum",T:fn.getEnumType(Tn)}]});var ot=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).hardwareEncoder=Tn.UNSET,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);ot.runtime=fn,ot.typeName="livekit.VideoConfiguration",ot.fields=fn.util.newFieldList(function(){return[{no:1,name:"hardware_encoder",kind:"enum",T:fn.getEnumType(Tn)}]});var ut=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).codecs=[],i.publish=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);ut.runtime=fn,ut.typeName="livekit.DisabledCodecs",ut.fields=fn.util.newFieldList(function(){return[{no:1,name:"codecs",kind:"message",T:An,repeated:!0},{no:2,name:"publish",kind:"message",T:An,repeated:!0}]});var st=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).duration=0,i.startTimestamp=ne.zero,i.endTimestamp=ne.zero,i.rtpClockTicks=ne.zero,i.driftSamples=ne.zero,i.driftMs=0,i.clockRate=0,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);st.runtime=fn,st.typeName="livekit.RTPDrift",st.fields=fn.util.newFieldList(function(){return[{no:1,name:"start_time",kind:"message",T:dn},{no:2,name:"end_time",kind:"message",T:dn},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"start_timestamp",kind:"scalar",T:4},{no:5,name:"end_timestamp",kind:"scalar",T:4},{no:6,name:"rtp_clock_ticks",kind:"scalar",T:4},{no:7,name:"drift_samples",kind:"scalar",T:3},{no:8,name:"drift_ms",kind:"scalar",T:1},{no:9,name:"clock_rate",kind:"scalar",T:1}]});var ct=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).duration=0,i.packets=0,i.packetRate=0,i.bytes=ne.zero,i.headerBytes=ne.zero,i.bitrate=0,i.packetsLost=0,i.packetLossRate=0,i.packetLossPercentage=0,i.packetsDuplicate=0,i.packetDuplicateRate=0,i.bytesDuplicate=ne.zero,i.headerBytesDuplicate=ne.zero,i.bitrateDuplicate=0,i.packetsPadding=0,i.packetPaddingRate=0,i.bytesPadding=ne.zero,i.headerBytesPadding=ne.zero,i.bitratePadding=0,i.packetsOutOfOrder=0,i.frames=0,i.frameRate=0,i.jitterCurrent=0,i.jitterMax=0,i.gapHistogram={},i.nacks=0,i.nackAcks=0,i.nackMisses=0,i.nackRepeated=0,i.plis=0,i.firs=0,i.rttCurrent=0,i.rttMax=0,i.keyFrames=0,i.layerLockPlis=0,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);ct.runtime=fn,ct.typeName="livekit.RTPStats",ct.fields=fn.util.newFieldList(function(){return[{no:1,name:"start_time",kind:"message",T:dn},{no:2,name:"end_time",kind:"message",T:dn},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"packets",kind:"scalar",T:13},{no:5,name:"packet_rate",kind:"scalar",T:1},{no:6,name:"bytes",kind:"scalar",T:4},{no:39,name:"header_bytes",kind:"scalar",T:4},{no:7,name:"bitrate",kind:"scalar",T:1},{no:8,name:"packets_lost",kind:"scalar",T:13},{no:9,name:"packet_loss_rate",kind:"scalar",T:1},{no:10,name:"packet_loss_percentage",kind:"scalar",T:2},{no:11,name:"packets_duplicate",kind:"scalar",T:13},{no:12,name:"packet_duplicate_rate",kind:"scalar",T:1},{no:13,name:"bytes_duplicate",kind:"scalar",T:4},{no:40,name:"header_bytes_duplicate",kind:"scalar",T:4},{no:14,name:"bitrate_duplicate",kind:"scalar",T:1},{no:15,name:"packets_padding",kind:"scalar",T:13},{no:16,name:"packet_padding_rate",kind:"scalar",T:1},{no:17,name:"bytes_padding",kind:"scalar",T:4},{no:41,name:"header_bytes_padding",kind:"scalar",T:4},{no:18,name:"bitrate_padding",kind:"scalar",T:1},{no:19,name:"packets_out_of_order",kind:"scalar",T:13},{no:20,name:"frames",kind:"scalar",T:13},{no:21,name:"frame_rate",kind:"scalar",T:1},{no:22,name:"jitter_current",kind:"scalar",T:1},{no:23,name:"jitter_max",kind:"scalar",T:1},{no:24,name:"gap_histogram",kind:"map",K:5,V:{kind:"scalar",T:13}},{no:25,name:"nacks",kind:"scalar",T:13},{no:37,name:"nack_acks",kind:"scalar",T:13},{no:26,name:"nack_misses",kind:"scalar",T:13},{no:38,name:"nack_repeated",kind:"scalar",T:13},{no:27,name:"plis",kind:"scalar",T:13},{no:28,name:"last_pli",kind:"message",T:dn},{no:29,name:"firs",kind:"scalar",T:13},{no:30,name:"last_fir",kind:"message",T:dn},{no:31,name:"rtt_current",kind:"scalar",T:13},{no:32,name:"rtt_max",kind:"scalar",T:13},{no:33,name:"key_frames",kind:"scalar",T:13},{no:34,name:"last_key_frame",kind:"message",T:dn},{no:35,name:"layer_lock_plis",kind:"scalar",T:13},{no:36,name:"last_layer_lock_pli",kind:"message",T:dn},{no:44,name:"packet_drift",kind:"message",T:st},{no:45,name:"ntp_report_drift",kind:"message",T:st},{no:46,name:"rebased_report_drift",kind:"message",T:st},{no:47,name:"received_report_drift",kind:"message",T:st}]});var lt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).rtpTimestamp=0,i.rtpTimestampExt=ne.zero,i.ntpTimestamp=ne.zero,i.at=ne.zero,i.atAdjusted=ne.zero,i.packets=0,i.octets=ne.zero,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);lt.runtime=fn,lt.typeName="livekit.RTCPSenderReportState",lt.fields=fn.util.newFieldList(function(){return[{no:1,name:"rtp_timestamp",kind:"scalar",T:13},{no:2,name:"rtp_timestamp_ext",kind:"scalar",T:4},{no:3,name:"ntp_timestamp",kind:"scalar",T:4},{no:4,name:"at",kind:"scalar",T:3},{no:5,name:"at_adjusted",kind:"scalar",T:3},{no:6,name:"packets",kind:"scalar",T:13},{no:7,name:"octets",kind:"scalar",T:4}]});var ft=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).started=!1,i.referenceLayerSpatial=0,i.preStartTime=ne.zero,i.extFirstTimestamp=ne.zero,i.dummyStartTimestampOffset=ne.zero,i.codecMunger={case:void 0},i.senderReportState=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);ft.runtime=fn,ft.typeName="livekit.RTPForwarderState",ft.fields=fn.util.newFieldList(function(){return[{no:1,name:"started",kind:"scalar",T:8},{no:2,name:"reference_layer_spatial",kind:"scalar",T:5},{no:3,name:"pre_start_time",kind:"scalar",T:3},{no:4,name:"ext_first_timestamp",kind:"scalar",T:4},{no:5,name:"dummy_start_timestamp_offset",kind:"scalar",T:4},{no:6,name:"rtp_munger",kind:"message",T:dt},{no:7,name:"vp8_munger",kind:"message",T:mt,oneof:"codec_munger"},{no:8,name:"sender_report_state",kind:"message",T:lt,repeated:!0}]});var dt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).extLastSequenceNumber=ne.zero,i.extSecondLastSequenceNumber=ne.zero,i.extLastTimestamp=ne.zero,i.extSecondLastTimestamp=ne.zero,i.lastMarker=!1,i.secondLastMarker=!1,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);dt.runtime=fn,dt.typeName="livekit.RTPMungerState",dt.fields=fn.util.newFieldList(function(){return[{no:1,name:"ext_last_sequence_number",kind:"scalar",T:4},{no:2,name:"ext_second_last_sequence_number",kind:"scalar",T:4},{no:3,name:"ext_last_timestamp",kind:"scalar",T:4},{no:4,name:"ext_second_last_timestamp",kind:"scalar",T:4},{no:5,name:"last_marker",kind:"scalar",T:8},{no:6,name:"second_last_marker",kind:"scalar",T:8}]});var mt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).extLastPictureId=0,i.pictureIdUsed=!1,i.lastTl0PicIdx=0,i.tl0PicIdxUsed=!1,i.tidUsed=!1,i.lastKeyIdx=0,i.keyIdxUsed=!1,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);mt.runtime=fn,mt.typeName="livekit.VP8MungerState",mt.fields=fn.util.newFieldList(function(){return[{no:1,name:"ext_last_picture_id",kind:"scalar",T:5},{no:2,name:"picture_id_used",kind:"scalar",T:8},{no:3,name:"last_tl0_pic_idx",kind:"scalar",T:13},{no:4,name:"tl0_pic_idx_used",kind:"scalar",T:8},{no:5,name:"tid_used",kind:"scalar",T:8},{no:6,name:"last_key_idx",kind:"scalar",T:13},{no:7,name:"key_idx_used",kind:"scalar",T:8}]});var yt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).unixMicro=ne.zero,i.ticks=0,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);yt.runtime=fn,yt.typeName="livekit.TimedVersion",yt.fields=fn.util.newFieldList(function(){return[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]});var pt,vt=function(e){function r(e){var i;return t(this,r),i=n(this,r),fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);vt.runtime=fn,vt.typeName="livekit.DataStream",vt.fields=fn.util.newFieldList(function(){return[]}),function(e){e[e.CREATE=0]="CREATE",e[e.UPDATE=1]="UPDATE",e[e.DELETE=2]="DELETE",e[e.REACTION=3]="REACTION"}(pt||(pt={})),fn.util.setEnumType(pt,"livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]);var kt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).operationType=pt.CREATE,i.version=0,i.replyToStreamId="",i.attachedStreamIds=[],i.generated=!1,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);kt.runtime=fn,kt.typeName="livekit.DataStream.TextHeader",kt.fields=fn.util.newFieldList(function(){return[{no:1,name:"operation_type",kind:"enum",T:fn.getEnumType(pt)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}]});var ht=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).fileName="",fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);ht.runtime=fn,ht.typeName="livekit.DataStream.FileHeader",ht.fields=fn.util.newFieldList(function(){return[{no:1,name:"file_name",kind:"scalar",T:9}]});var gt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).streamId="",i.timestamp=ne.zero,i.topic="",i.mimeType="",i.encryptionType=Un.NONE,i.extensions={},i.contentHeader={case:void 0},fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);gt.runtime=fn,gt.typeName="livekit.DataStream.Header",gt.fields=fn.util.newFieldList(function(){return[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:fn.getEnumType(Un)},{no:8,name:"extensions",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:kt,oneof:"content_header"},{no:10,name:"file_header",kind:"message",T:ht,oneof:"content_header"}]});var Tt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).streamId="",i.chunkIndex=ne.zero,i.content=new Uint8Array(0),i.complete=!1,i.version=0,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Tt.runtime=fn,Tt.typeName="livekit.DataStream.Chunk",Tt.fields=fn.util.newFieldList(function(){return[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"complete",kind:"scalar",T:8},{no:5,name:"version",kind:"scalar",T:5},{no:6,name:"iv",kind:"scalar",T:12,opt:!0}]});var wt,St=/version\/(\d+(\.?_?\d+)+)/i;function bt(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("undefined"!=typeof navigator){var t=navigator.userAgent.toLowerCase();if(void 0===wt||n){var r=Et.find(function(e){return e.test.test(t)});wt=null==r?void 0:r.describe(t)}return wt}}var Et=[{test:/firefox|iceweasel|fxios/i,describe:function(e){return{name:"Firefox",version:Nt(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:It(e)}}},{test:/chrom|crios|crmo/i,describe:function(e){return{name:"Chrome",version:Nt(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("crios")?"iOS":void 0,osVersion:It(e)}}},{test:/safari|applewebkit/i,describe:function(e){return{name:"Safari",version:Nt(St,e),os:e.includes("mobile/")?"iOS":"macOS",osVersion:It(e)}}}];function Nt(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=n.match(e);return r&&r.length>=t&&r[t]||""}function It(e){return e.includes("mac os")?Nt(/\(.+?(\d+_\d+(:?_\d+)?)/,e,1).replace(/_/g,"."):void 0}var _t=i(function e(){t(this,e)});_t.setTimeout=function(){return setTimeout.apply(void 0,arguments)},_t.setInterval=function(){return setInterval.apply(void 0,arguments)},_t.clearTimeout=function(){return clearTimeout.apply(void 0,arguments)},_t.clearInterval=function(){return clearInterval.apply(void 0,arguments)};var Ot,Lt,At,Ct,Jt,Rt=function(){return i(function e(n,r,i,a,o){if(t(this,e),"object"===p(n))this.width=n.width,this.height=n.height,this.aspectRatio=n.aspectRatio,this.encoding={maxBitrate:n.maxBitrate,maxFramerate:n.maxFramerate,priority:n.priority};else{if(void 0===r||void 0===i)throw new TypeError("Unsupported options: provide at least width, height and maxBitrate");this.width=n,this.height=r,this.aspectRatio=n/r,this.encoding={maxBitrate:i,maxFramerate:a,priority:o}}},[{key:"resolution",get:function(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}])}();!function(e){e.telephone={maxBitrate:12e3},e.speech={maxBitrate:24e3},e.music={maxBitrate:48e3},e.musicStereo={maxBitrate:64e3},e.musicHighQuality={maxBitrate:96e3},e.musicHighQualityStereo={maxBitrate:128e3}}(Ot||(Ot={})),new Rt(960,540,5e5,25),new Rt(1280,720,125e4,30),new Rt(720,540,55e4,25),new Rt(960,720,12e5,30),new Rt(640,360,2e5,3,"medium"),new Rt(640,360,4e5,15,"medium"),new Rt(1280,720,8e5,5,"medium"),new Rt(1280,720,15e5,15,"medium"),new Rt(1280,720,2e6,30,"medium"),new Rt(1920,1080,25e5,15,"medium"),new Rt(1920,1080,5e6,30,"medium"),new Rt(0,0,7e6,30,"medium"),function(e){e[e.PUBLISHER=0]="PUBLISHER",e[e.SUBSCRIBER=1]="SUBSCRIBER"}(Lt||(Lt={})),fn.util.setEnumType(Lt,"livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),function(e){e[e.ACTIVE=0]="ACTIVE",e[e.PAUSED=1]="PAUSED"}(At||(At={})),fn.util.setEnumType(At,"livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),function(e){e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.TLS=2]="TLS"}(Ct||(Ct={})),fn.util.setEnumType(Ct,"livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),function(e){e[e.AddAudioTrack=0]="AddAudioTrack",e[e.AddVideoTrack=1]="AddVideoTrack",e[e.Join=2]="Join",e[e.Leave=3]="Leave",e[e.MuteAudio=4]="MuteAudio",e[e.MuteVideo=5]="MuteVideo",e[e.UnmuteAudio=6]="UnmuteAudio",e[e.UnmuteVideo=7]="UnmuteVideo"}(Jt||(Jt={})),fn.util.setEnumType(Jt,"livekit.RequestType",[{no:0,name:"AddAudioTrack"},{no:1,name:"AddVideoTrack"},{no:2,name:"Join"},{no:3,name:"Leave"},{no:4,name:"MuteAudio"},{no:5,name:"MuteVideo"},{no:6,name:"UnmuteAudio"},{no:7,name:"UnmuteVideo"}]);var Pt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).message={case:void 0},fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Pt.runtime=fn,Pt.typeName="livekit.SignalRequest",Pt.fields=fn.util.newFieldList(function(){return[{no:1,name:"offer",kind:"message",T:jt,oneof:"message"},{no:2,name:"answer",kind:"message",T:jt,oneof:"message"},{no:3,name:"trickle",kind:"message",T:Bt,oneof:"message"},{no:4,name:"add_track",kind:"message",T:Ft,oneof:"message"},{no:5,name:"mute",kind:"message",T:qt,oneof:"message"},{no:6,name:"subscription",kind:"message",T:Ht,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:Wt,oneof:"message"},{no:8,name:"leave",kind:"message",T:Qt,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:Zt,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:fr,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:mr,oneof:"message"},{no:13,name:"simulate",kind:"message",T:pr,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:$t,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:vr,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:zt,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:Xt,oneof:"message"},{no:19,name:"health_check",kind:"message",T:Er,oneof:"message"}]});var Dt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).message={case:void 0},fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Dt.runtime=fn,Dt.typeName="livekit.SignalResponse",Dt.fields=fn.util.newFieldList(function(){return[{no:1,name:"join",kind:"message",T:Mt,oneof:"message"},{no:2,name:"answer",kind:"message",T:jt,oneof:"message"},{no:3,name:"offer",kind:"message",T:jt,oneof:"message"},{no:4,name:"trickle",kind:"message",T:Bt,oneof:"message"},{no:5,name:"update",kind:"message",T:Gt,oneof:"message"},{no:6,name:"track_published",kind:"message",T:Kt,oneof:"message"},{no:8,name:"leave",kind:"message",T:Qt,oneof:"message"},{no:9,name:"mute",kind:"message",T:qt,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:nr,oneof:"message"},{no:11,name:"room_update",kind:"message",T:tr,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:ir,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:or,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:cr,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:dr,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:Vt,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:xt,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:kr,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:Tr,oneof:"message"},{no:22,name:"health_check_response",kind:"message",T:Nr,oneof:"message"},{no:23,name:"request_response",kind:"message",T:Sr,oneof:"message"},{no:24,name:"track_subscribed",kind:"message",T:br,oneof:"message"}]});var Ut=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).codec="",i.cid="",fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Ut.runtime=fn,Ut.typeName="livekit.SimulcastCodec",Ut.fields=fn.util.newFieldList(function(){return[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]});var Ft=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).cid="",i.name="",i.type=vn.AUDIO,i.width=0,i.height=0,i.muted=!1,i.disableDtx=!1,i.source=kn.UNKNOWN,i.layers=[],i.simulcastCodecs=[],i.sid="",i.stereo=!1,i.disableRed=!1,i.encryption=Un.NONE,i.stream="",fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Ft.runtime=fn,Ft.typeName="livekit.AddTrackRequest",Ft.fields=fn.util.newFieldList(function(){return[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:fn.getEnumType(vn)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:fn.getEnumType(kn)},{no:9,name:"layers",kind:"message",T:Mn,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:Ut,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:fn.getEnumType(Un)},{no:15,name:"stream",kind:"scalar",T:9}]});var Bt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).candidateInit="",i.target=Lt.PUBLISHER,i.final=!1,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Bt.runtime=fn,Bt.typeName="livekit.TrickleRequest",Bt.fields=fn.util.newFieldList(function(){return[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:fn.getEnumType(Lt)},{no:3,name:"final",kind:"scalar",T:8}]});var qt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).sid="",i.muted=!1,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);qt.runtime=fn,qt.typeName="livekit.MuteTrackRequest",qt.fields=fn.util.newFieldList(function(){return[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]});var Mt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).otherParticipants=[],i.serverVersion="",i.iceServers=[],i.subscriberPrimary=!1,i.alternativeUrl="",i.serverRegion="",i.pingTimeout=0,i.pingInterval=0,i.sifTrailer=new Uint8Array(0),i.enabledPublishCodecs=[],i.fastPublish=!1,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Mt.runtime=fn,Mt.typeName="livekit.JoinResponse",Mt.fields=fn.util.newFieldList(function(){return[{no:1,name:"room",kind:"message",T:Ln},{no:2,name:"participant",kind:"message",T:Dn},{no:3,name:"other_participants",kind:"message",T:Dn,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:er,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:at},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:tt},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:An,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]});var xt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).iceServers=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);xt.runtime=fn,xt.typeName="livekit.ReconnectResponse",xt.fields=fn.util.newFieldList(function(){return[{no:1,name:"ice_servers",kind:"message",T:er,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:at}]});var Kt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).cid="",fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Kt.runtime=fn,Kt.typeName="livekit.TrackPublishedResponse",Kt.fields=fn.util.newFieldList(function(){return[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:qn}]});var Vt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).trackSid="",fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Vt.runtime=fn,Vt.typeName="livekit.TrackUnpublishedResponse",Vt.fields=fn.util.newFieldList(function(){return[{no:1,name:"track_sid",kind:"scalar",T:9}]});var jt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).type="",i.sdp="",fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);jt.runtime=fn,jt.typeName="livekit.SessionDescription",jt.fields=fn.util.newFieldList(function(){return[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}]});var Gt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).participants=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Gt.runtime=fn,Gt.typeName="livekit.ParticipantUpdate",Gt.fields=fn.util.newFieldList(function(){return[{no:1,name:"participants",kind:"message",T:Dn,repeated:!0}]});var Ht=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).trackSids=[],i.subscribe=!1,i.participantTracks=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Ht.runtime=fn,Ht.typeName="livekit.UpdateSubscription",Ht.fields=fn.util.newFieldList(function(){return[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:et,repeated:!0}]});var Wt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).trackSids=[],i.disabled=!1,i.quality=hn.LOW,i.width=0,i.height=0,i.fps=0,i.priority=0,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Wt.runtime=fn,Wt.typeName="livekit.UpdateTrackSettings",Wt.fields=fn.util.newFieldList(function(){return[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:fn.getEnumType(hn)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]});var zt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).trackSid="",i.features=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);zt.runtime=fn,zt.typeName="livekit.UpdateLocalAudioTrack",zt.fields=fn.util.newFieldList(function(){return[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:fn.getEnumType(En),repeated:!0}]});var Xt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).trackSid="",i.width=0,i.height=0,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Xt.runtime=fn,Xt.typeName="livekit.UpdateLocalVideoTrack",Xt.fields=fn.util.newFieldList(function(){return[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]});var Yt,Qt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).canReconnect=!1,i.reason=wn.UNKNOWN_REASON,i.action=Yt.DISCONNECT,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Qt.runtime=fn,Qt.typeName="livekit.LeaveRequest",Qt.fields=fn.util.newFieldList(function(){return[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:fn.getEnumType(wn)},{no:3,name:"action",kind:"enum",T:fn.getEnumType(Yt)},{no:4,name:"regions",kind:"message",T:hr}]}),function(e){e[e.DISCONNECT=0]="DISCONNECT",e[e.RESUME=1]="RESUME",e[e.RECONNECT=2]="RECONNECT"}(Yt||(Yt={})),fn.util.setEnumType(Yt,"livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]);var Zt=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).trackSid="",i.layers=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Zt.runtime=fn,Zt.typeName="livekit.UpdateVideoLayers",Zt.fields=fn.util.newFieldList(function(){return[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:Mn,repeated:!0}]});var $t=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).metadata="",i.name="",i.attributes={},i.requestId=0,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);$t.runtime=fn,$t.typeName="livekit.UpdateParticipantMetadata",$t.fields=fn.util.newFieldList(function(){return[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]});var er=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).urls=[],i.username="",i.credential="",fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);er.runtime=fn,er.typeName="livekit.ICEServer",er.fields=fn.util.newFieldList(function(){return[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]});var nr=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).speakers=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);nr.runtime=fn,nr.typeName="livekit.SpeakersChanged",nr.fields=fn.util.newFieldList(function(){return[{no:1,name:"speakers",kind:"message",T:jn,repeated:!0}]});var tr=function(e){function r(e){var i;return t(this,r),i=n(this,r),fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);tr.runtime=fn,tr.typeName="livekit.RoomUpdate",tr.fields=fn.util.newFieldList(function(){return[{no:1,name:"room",kind:"message",T:Ln}]});var rr=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).participantSid="",i.quality=gn.POOR,i.score=0,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);rr.runtime=fn,rr.typeName="livekit.ConnectionQualityInfo",rr.fields=fn.util.newFieldList(function(){return[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:fn.getEnumType(gn)},{no:3,name:"score",kind:"scalar",T:2}]});var ir=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).updates=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);ir.runtime=fn,ir.typeName="livekit.ConnectionQualityUpdate",ir.fields=fn.util.newFieldList(function(){return[{no:1,name:"updates",kind:"message",T:rr,repeated:!0}]});var ar=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).participantSid="",i.trackSid="",i.state=At.ACTIVE,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);ar.runtime=fn,ar.typeName="livekit.StreamStateInfo",ar.fields=fn.util.newFieldList(function(){return[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:fn.getEnumType(At)}]});var or=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).streamStates=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);or.runtime=fn,or.typeName="livekit.StreamStateUpdate",or.fields=fn.util.newFieldList(function(){return[{no:1,name:"stream_states",kind:"message",T:ar,repeated:!0}]});var ur=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).quality=hn.LOW,i.enabled=!1,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);ur.runtime=fn,ur.typeName="livekit.SubscribedQuality",ur.fields=fn.util.newFieldList(function(){return[{no:1,name:"quality",kind:"enum",T:fn.getEnumType(hn)},{no:2,name:"enabled",kind:"scalar",T:8}]});var sr=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).codec="",i.qualities=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);sr.runtime=fn,sr.typeName="livekit.SubscribedCodec",sr.fields=fn.util.newFieldList(function(){return[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:ur,repeated:!0}]});var cr=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).trackSid="",i.subscribedQualities=[],i.subscribedCodecs=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);cr.runtime=fn,cr.typeName="livekit.SubscribedQualityUpdate",cr.fields=fn.util.newFieldList(function(){return[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:ur,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:sr,repeated:!0}]});var lr=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).participantSid="",i.allTracks=!1,i.trackSids=[],i.participantIdentity="",fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);lr.runtime=fn,lr.typeName="livekit.TrackPermission",lr.fields=fn.util.newFieldList(function(){return[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]});var fr=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).allParticipants=!1,i.trackPermissions=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);fr.runtime=fn,fr.typeName="livekit.SubscriptionPermission",fr.fields=fn.util.newFieldList(function(){return[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:lr,repeated:!0}]});var dr=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).participantSid="",i.trackSid="",i.allowed=!1,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);dr.runtime=fn,dr.typeName="livekit.SubscriptionPermissionUpdate",dr.fields=fn.util.newFieldList(function(){return[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]});var mr=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).publishTracks=[],i.dataChannels=[],i.trackSidsDisabled=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);mr.runtime=fn,mr.typeName="livekit.SyncState",mr.fields=fn.util.newFieldList(function(){return[{no:1,name:"answer",kind:"message",T:jt},{no:2,name:"subscription",kind:"message",T:Ht},{no:3,name:"publish_tracks",kind:"message",T:Kt,repeated:!0},{no:4,name:"data_channels",kind:"message",T:yr,repeated:!0},{no:5,name:"offer",kind:"message",T:jt},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0}]});var yr=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).label="",i.id=0,i.target=Lt.PUBLISHER,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);yr.runtime=fn,yr.typeName="livekit.DataChannelInfo",yr.fields=fn.util.newFieldList(function(){return[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:fn.getEnumType(Lt)}]});var pr=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).scenario={case:void 0},fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);pr.runtime=fn,pr.typeName="livekit.SimulateScenario",pr.fields=fn.util.newFieldList(function(){return[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:fn.getEnumType(Ct),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]});var vr=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).timestamp=ne.zero,i.rtt=ne.zero,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);vr.runtime=fn,vr.typeName="livekit.Ping",vr.fields=fn.util.newFieldList(function(){return[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]});var kr=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).lastPingTimestamp=ne.zero,i.timestamp=ne.zero,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);kr.runtime=fn,kr.typeName="livekit.Pong",kr.fields=fn.util.newFieldList(function(){return[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]});var hr=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).regions=[],fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);hr.runtime=fn,hr.typeName="livekit.RegionSettings",hr.fields=fn.util.newFieldList(function(){return[{no:1,name:"regions",kind:"message",T:gr,repeated:!0}]});var gr=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).region="",i.url="",i.distance=ne.zero,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);gr.runtime=fn,gr.typeName="livekit.RegionInfo",gr.fields=fn.util.newFieldList(function(){return[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]});var Tr=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).trackSid="",i.err=bn.SE_UNKNOWN,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Tr.runtime=fn,Tr.typeName="livekit.SubscriptionResponse",Tr.fields=fn.util.newFieldList(function(){return[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:fn.getEnumType(bn)}]});var wr,Sr=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).requestId=0,i.reason=wr.OK,i.message="",fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Sr.runtime=fn,Sr.typeName="livekit.RequestResponse",Sr.fields=fn.util.newFieldList(function(){return[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:fn.getEnumType(wr)},{no:3,name:"message",kind:"scalar",T:9}]}),function(e){e[e.OK=0]="OK",e[e.NOT_FOUND=1]="NOT_FOUND",e[e.NOT_ALLOWED=2]="NOT_ALLOWED",e[e.LIMIT_EXCEEDED=3]="LIMIT_EXCEEDED"}(wr||(wr={})),fn.util.setEnumType(wr,"livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]);var br=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).trackSid="",fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);br.runtime=fn,br.typeName="livekit.TrackSubscribed",br.fields=fn.util.newFieldList(function(){return[{no:1,name:"track_sid",kind:"scalar",T:9}]});var Er=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).sid="",i.roomName="",i.egressId="",i.nodeId="",i.timestamp=ne.zero,i.connId="",i.errorMessage="",i.isNormalClosure=!1,fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Er.runtime=fn,Er.typeName="livekit.HealthCheck",Er.fields=fn.util.newFieldList(function(){return[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"room_name",kind:"scalar",T:9},{no:3,name:"egress_id",kind:"scalar",T:9},{no:4,name:"node_id",kind:"scalar",T:9},{no:5,name:"timestamp",kind:"scalar",T:3},{no:6,name:"conn_id",kind:"scalar",T:9},{no:7,name:"error_message",kind:"scalar",T:9},{no:8,name:"is_normal_closure",kind:"scalar",T:8}]});var Nr=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).connId="",fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);Nr.runtime=fn,Nr.typeName="livekit.HealthCheckResponse",Nr.fields=fn.util.newFieldList(function(){return[{no:1,name:"conn_id",kind:"scalar",T:9}]});var Ir,_r=function(e){function r(e){var i;return t(this,r),(i=n(this,r)).sdk=Ir.UNKNOWN,i.os="",i.deviceId="",i.date="",i.ipaddress="",i.nwSignalStrength="",fn.util.initPartial(e,i),i}return u(r,e),i(r,null,[{key:"fromBinary",value:function(e,n){return(new r).fromBinary(e,n)}},{key:"fromJson",value:function(e,n){return(new r).fromJson(e,n)}},{key:"fromJsonString",value:function(e,n){return(new r).fromJsonString(e,n)}},{key:"equals",value:function(e,n){return fn.util.equals(r,e,n)}}])}(M);_r.runtime=fn,_r.typeName="livekit.DeviceInfo",_r.fields=fn.util.newFieldList(function(){return[{no:1,name:"sdk",kind:"enum",T:fn.getEnumType(Ir)},{no:2,name:"os",kind:"scalar",T:9},{no:3,name:"deviceId",kind:"scalar",T:9},{no:4,name:"date",kind:"scalar",T:9},{no:5,name:"ipaddress",kind:"scalar",T:9},{no:6,name:"nw_signal_strength",kind:"scalar",T:9}]}),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JS=1]="JS",e[e.SWIFT=2]="SWIFT",e[e.ANDROID=3]="ANDROID",e[e.FLUTTER=4]="FLUTTER",e[e.GO=5]="GO",e[e.UNITY=6]="UNITY",e[e.REACT_NATIVE=7]="REACT_NATIVE",e[e.RUST=8]="RUST"}(Ir||(Ir={})),fn.util.setEnumType(Ir,"livekit.DeviceInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"}]);var Or,Lr={exports:{}},Ar="object"===("undefined"==typeof Reflect?"undefined":p(Reflect))?Reflect:null,Cr=Ar&&"function"==typeof Ar.apply?Ar.apply:function(e,n,t){return Function.prototype.apply.call(e,n,t)};Or=Ar&&"function"==typeof Ar.ownKeys?Ar.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var Jr=Number.isNaN||function(e){return e!=e};function Rr(){Rr.init.call(this)}Lr.exports=Rr,Lr.exports.once=function(e,n){return new Promise(function(t,r){function i(t){e.removeListener(n,a),r(t)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",i),t([].slice.call(arguments))}Vr(e,n,a,{once:!0}),"error"!==n&&function(e,n,t){"function"==typeof e.on&&Vr(e,"error",n,t)}(e,i,{once:!0})})},Rr.EventEmitter=Rr,Rr.prototype._events=void 0,Rr.prototype._eventsCount=0,Rr.prototype._maxListeners=void 0;var Pr=10;function Dr(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+p(e))}function Ur(e){return void 0===e._maxListeners?Rr.defaultMaxListeners:e._maxListeners}function Fr(e,n,t,r){var i,a,o,u;if(Dr(t),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",n,t.listener?t.listener:t),a=e._events),o=a[n]),void 0===o)o=a[n]=t,++e._eventsCount;else if("function"==typeof o?o=a[n]=r?[t,o]:[o,t]:r?o.unshift(t):o.push(t),(i=Ur(e))>0&&o.length>i&&!o.warned){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(n)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=n,s.count=o.length,u=s,console&&console.warn&&console.warn(u)}return e}function Br(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function qr(e,n,t){var r={fired:!1,wrapFn:void 0,target:e,type:n,listener:t},i=Br.bind(r);return i.listener=t,r.wrapFn=i,i}function Mr(e,n,t){var r=e._events;if(void 0===r)return[];var i=r[n];return void 0===i?[]:"function"==typeof i?t?[i.listener||i]:[i]:t?function(e){for(var n=new Array(e.length),t=0;t<n.length;++t)n[t]=e[t].listener||e[t];return n}(i):Kr(i,i.length)}function xr(e){var n=this._events;if(void 0!==n){var t=n[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function Kr(e,n){for(var t=new Array(n),r=0;r<n;++r)t[r]=e[r];return t}function Vr(e,n,t,r){if("function"==typeof e.on)r.once?e.once(n,t):e.on(n,t);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+p(e));e.addEventListener(n,function i(a){r.once&&e.removeEventListener(n,i),t(a)})}}Object.defineProperty(Rr,"defaultMaxListeners",{enumerable:!0,get:function(){return Pr},set:function(e){if("number"!=typeof e||e<0||Jr(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Pr=e}}),Rr.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Rr.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||Jr(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},Rr.prototype.getMaxListeners=function(){return Ur(this)},Rr.prototype.emit=function(e){for(var n=[],t=1;t<arguments.length;t++)n.push(arguments[t]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(n.length>0&&(a=n[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)Cr(u,this,n);else{var s=u.length,c=Kr(u,s);for(t=0;t<s;++t)Cr(c[t],this,n)}return!0},Rr.prototype.addListener=function(e,n){return Fr(this,e,n,!1)},Rr.prototype.on=Rr.prototype.addListener,Rr.prototype.prependListener=function(e,n){return Fr(this,e,n,!0)},Rr.prototype.once=function(e,n){return Dr(n),this.on(e,qr(this,e,n)),this},Rr.prototype.prependOnceListener=function(e,n){return Dr(n),this.prependListener(e,qr(this,e,n)),this},Rr.prototype.removeListener=function(e,n){var t,r,i,a,o;if(Dr(n),void 0===(r=this._events))return this;if(void 0===(t=r[e]))return this;if(t===n||t.listener===n)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,t.listener||n));else if("function"!=typeof t){for(i=-1,a=t.length-1;a>=0;a--)if(t[a]===n||t[a].listener===n){o=t[a].listener,i=a;break}if(i<0)return this;0===i?t.shift():function(e,n){for(;n+1<e.length;n++)e[n]=e[n+1];e.pop()}(t,i),1===t.length&&(r[e]=t[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||n)}return this},Rr.prototype.off=Rr.prototype.removeListener,Rr.prototype.removeAllListeners=function(e){var n,t,r;if(void 0===(t=this._events))return this;if(void 0===t.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==t[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete t[e]),this;if(0===arguments.length){var i,a=Object.keys(t);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(n=t[e]))this.removeListener(e,n);else if(void 0!==n)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this},Rr.prototype.listeners=function(e){return Mr(this,e,!0)},Rr.prototype.rawListeners=function(e){return Mr(this,e,!1)},Rr.listenerCount=function(e,n){return"function"==typeof e.listenerCount?e.listenerCount(n):xr.call(e,n)},Rr.prototype.listenerCount=xr,Rr.prototype.eventNames=function(){return this._eventsCount>0?Or(this._events):[]};var jr,Gr,Hr,Wr,zr=Lr.exports;!function(e){e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.ConnectionStateChanged="connectionStateChanged",e.MediaDevicesChanged="mediaDevicesChanged",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalAudioSilenceDetected="localAudioSilenceDetected",e.ActiveSpeakersChanged="activeSpeakersChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.ParticipantAttributesChanged="participantAttributesChanged",e.RoomMetadataChanged="roomMetadataChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.AudioPlaybackStatusChanged="audioPlaybackChanged",e.VideoPlaybackStatusChanged="videoPlaybackChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.SignalConnected="signalConnected",e.RecordingStatusChanged="recordingStatusChanged",e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ActiveDeviceChanged="activeDeviceChanged",e.ChatMessage="chatMessage",e.ReconnectPrimaryDelay="reconnectPrimaryDelay",e.ReconnectSecondaryDelay="reconnectSecondaryDelay",e.ReconnectICEDelay="reconnectICEDelay",e.LocalTrackSubscribed="localTrackSubscribed",e.MetricsReceived="metricsReceived"}(jr||(jr={})),function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.IsSpeakingChanged="isSpeakingChanged",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.MediaDevicesError="mediaDevicesError",e.AudioStreamAcquired="audioStreamAcquired",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.PCTrackAdded="pcTrackAdded",e.AttributesChanged="attributesChanged",e.ChatMessage="chatMessage",e.LocalTrackSubscribed="localTrackSubscribed"}(Gr||(Gr={})),function(e){e.TransportsCreated="transportsCreated",e.Connected="connected",e.Disconnected="disconnected",e.Resuming="resuming",e.Resumed="resumed",e.Restarting="restarting",e.Restarted="restarted",e.SignalResumed="signalResumed",e.SignalRestarted="signalRestarted",e.Closing="closing",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.DataPacketReceived="dataPacketReceived",e.PrimaryDelay="primaryDelay",e.SecondaryDelay="secondaryDelay",e.TranscriptionReceived="transcriptionReceived",e.RTPVideoMapUpdate="rtpVideoMapUpdate",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ParticipantUpdate="participantUpdate",e.RoomUpdate="roomUpdate",e.SpeakersChanged="speakersChanged",e.StreamStateChanged="streamStateChanged",e.ConnectionQualityUpdate="connectionQualityUpdate",e.SubscriptionError="subscriptionError",e.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",e.RemoteMute="remoteMute",e.SubscribedQualityUpdate="subscribedQualityUpdate",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalTrackSubscribed="localTrackSubscribed",e.Offline="offline",e.SignalRequestResponse="signalRequestResponse"}(Hr||(Hr={})),function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.Restarted="restarted",e.Ended="ended",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed",e.AudioSilenceDetected="audioSilenceDetected",e.VisibilityChanged="visibilityChanged",e.VideoDimensionsChanged="videoDimensionsChanged",e.VideoPlaybackStarted="videoPlaybackStarted",e.VideoPlaybackFailed="videoPlaybackFailed",e.ElementAttached="elementAttached",e.ElementDetached="elementDetached",e.UpstreamPaused="upstreamPaused",e.UpstreamResumed="upstreamResumed",e.SubscriptionPermissionChanged="subscriptionPermissionChanged",e.SubscriptionStatusChanged="subscriptionStatusChanged",e.SubscriptionFailed="subscriptionFailed",e.TrackProcessorUpdate="trackProcessorUpdate",e.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",e.TranscriptionReceived="transcriptionReceived",e.TimeSyncUpdate="timeSyncUpdate"}(Wr||(Wr={}));var Xr,Yr=[];!function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH"}(Xr||(Xr={}));var Qr=function(e){function r(e,i){var a,o,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t(this,r),(a=n(this,r)).attachedElements=[],a.isMuted=!1,a.streamState=r.StreamState.Active,a.isInBackground=!1,a._currentBitrate=0,a.log=_,a.appVisibilityChangedListener=function(){a.backgroundTimeout&&clearTimeout(a.backgroundTimeout),"hidden"===document.visibilityState?a.backgroundTimeout=setTimeout(function(){return a.handleAppVisibilityChanged()},5e3):a.handleAppVisibilityChanged()},a.log=O(null!==(o=u.loggerName)&&void 0!==o?o:N.Track),a.loggerContextCb=u.loggerContextCb,a.setMaxListeners(100),a.kind=i,a._mediaStreamTrack=e,a._mediaStreamID=e.id,a.source=r.Source.Unknown,a}return u(r,e),i(r,[{key:"logContext",get:function(){var e;return Object.assign(Object.assign({},null===(e=this.loggerContextCb)||void 0===e?void 0:e.call(this)),$r(this))}},{key:"currentBitrate",get:function(){return this._currentBitrate}},{key:"mediaStreamTrack",get:function(){return this._mediaStreamTrack}},{key:"mediaStreamID",get:function(){return this._mediaStreamID}},{key:"attach",value:function(e){var n=this,t="audio";this.kind===r.Kind.Video&&(t="video"),0===this.attachedElements.length&&this.kind===r.Kind.Video&&this.addAppVisibilityListener(),e||("audio"===t&&(Yr.forEach(function(n){null!==n.parentElement||e||(e=n)}),e&&Yr.splice(Yr.indexOf(e),1)),e||(e=document.createElement(t))),this.attachedElements.includes(e)||this.attachedElements.push(e),function(e,n){var t,r;t=n.srcObject instanceof MediaStream?n.srcObject:new MediaStream;r="audio"===e.kind?t.getAudioTracks():t.getVideoTracks();r.includes(e)||(r.forEach(function(e){t.removeTrack(e)}),t.addTrack(e));ei()&&n instanceof HTMLVideoElement||(n.autoplay=!0);n.muted=0===t.getAudioTracks().length,n instanceof HTMLVideoElement&&(n.playsInline=!0);n.srcObject!==t&&(n.srcObject=t,(ei()||"Firefox"===(null===(i=bt())||void 0===i?void 0:i.name))&&n instanceof HTMLVideoElement&&setTimeout(function(){n.srcObject=t,n.play().catch(function(){})},0));var i}(this.mediaStreamTrack,e);var i=e.srcObject.getTracks(),a=i.some(function(e){return"audio"===e.kind});return e.play().then(function(){n.emit(a?Wr.AudioPlaybackStarted:Wr.VideoPlaybackStarted)}).catch(function(t){"NotAllowedError"===t.name?n.emit(a?Wr.AudioPlaybackFailed:Wr.VideoPlaybackFailed,t):"AbortError"===t.name?_.debug("".concat(a?"audio":"video"," playback aborted, likely due to new play request")):_.warn("could not playback ".concat(a?"audio":"video"),t),a&&e&&i.some(function(e){return"video"===e.kind})&&"NotAllowedError"===t.name&&(e.muted=!0,e.play().catch(function(){}))}),this.emit(Wr.ElementAttached,e),e}},{key:"detach",value:function(e){var n=this;try{if(e){Zr(this.mediaStreamTrack,e);var t=this.attachedElements.indexOf(e);return t>=0&&(this.attachedElements.splice(t,1),this.recycleElement(e),this.emit(Wr.ElementDetached,e)),e}var r=[];return this.attachedElements.forEach(function(e){Zr(n.mediaStreamTrack,e),r.push(e),n.recycleElement(e),n.emit(Wr.ElementDetached,e)}),this.attachedElements=[],r}finally{0===this.attachedElements.length&&this.removeAppVisibilityListener()}}},{key:"stop",value:function(){this.stopMonitor(),this._mediaStreamTrack.stop()}},{key:"enable",value:function(){this._mediaStreamTrack.enabled=!0}},{key:"disable",value:function(){this._mediaStreamTrack.enabled=!1}},{key:"stopMonitor",value:function(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}},{key:"updateLoggerOptions",value:function(e){e.loggerName&&(this.log=O(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}},{key:"recycleElement",value:function(e){if(e instanceof HTMLAudioElement){var n=!0;e.pause(),Yr.forEach(function(e){e.parentElement||(n=!1)}),n&&Yr.push(e)}}},{key:"handleAppVisibilityChanged",value:function(){return h(this,void 0,void 0,c().m(function e(){var n=this;return c().w(function(e){for(;;)switch(e.n){case 0:this.isInBackground="hidden"===document.visibilityState,this.isInBackground||this.kind!==r.Kind.Video||setTimeout(function(){return n.attachedElements.forEach(function(e){return e.play().catch(function(){})})},0);case 1:return e.a(2)}},e,this)}))}},{key:"addAppVisibilityListener",value:function(){ni()?(this.isInBackground="hidden"===document.visibilityState,document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}},{key:"removeAppVisibilityListener",value:function(){ni()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}])}(zr.EventEmitter);function Zr(e,n){if(n.srcObject instanceof MediaStream){var t=n.srcObject;t.removeTrack(e),t.getTracks().length>0?n.srcObject=t:n.srcObject=null}}function $r(e){return e instanceof Qr?{trackID:e.sid,source:e.source,muted:e.isMuted,enabled:e.mediaStreamTrack.enabled,kind:e.kind,streamID:e.mediaStreamID,streamTrackID:e.mediaStreamTrack.id}:{trackID:e.trackSid,enabled:e.isEnabled,muted:e.isMuted,trackInfo:Object.assign({mimeType:e.mimeType,name:e.trackName,encrypted:e.isEncrypted,kind:e.kind,source:e.source},e.track?$r(e.track):{})}}function ei(){var e;return"Safari"===(null===(e=bt())||void 0===e?void 0:e.name)}function ni(){return"undefined"!=typeof document}!function(e){var n,t,r;!function(e){e.Audio="audio",e.Video="video",e.Unknown="unknown"}(n=e.Kind||(e.Kind={})),function(e){e.Camera="camera",e.Microphone="microphone",e.ScreenShare="screen_share",e.ScreenShareAudio="screen_share_audio",e.Unknown="unknown"}(t=e.Source||(e.Source={})),function(e){e.Active="active",e.Paused="paused",e.Unknown="unknown"}(r=e.StreamState||(e.StreamState={})),e.kindToProto=function(e){switch(e){case n.Audio:return vn.AUDIO;case n.Video:return vn.VIDEO;default:return vn.DATA}},e.kindFromProto=function(e){switch(e){case vn.AUDIO:return n.Audio;case vn.VIDEO:return n.Video;default:return n.Unknown}},e.sourceToProto=function(e){switch(e){case t.Camera:return kn.CAMERA;case t.Microphone:return kn.MICROPHONE;case t.ScreenShare:return kn.SCREEN_SHARE;case t.ScreenShareAudio:return kn.SCREEN_SHARE_AUDIO;default:return kn.UNKNOWN}},e.sourceFromProto=function(e){switch(e){case kn.CAMERA:return t.Camera;case kn.MICROPHONE:return t.Microphone;case kn.SCREEN_SHARE:return t.ScreenShare;case kn.SCREEN_SHARE_AUDIO:return t.ScreenShareAudio;default:return t.Unknown}},e.streamStateFromProto=function(e){switch(e){case At.ACTIVE:return r.Active;case At.PAUSED:return r.Paused;default:return r.Unknown}}}(Qr||(Qr={}));var ti,ri=function(){return i(function e(){t(this,e),this._locking=Promise.resolve(),this._locks=0},[{key:"isLocked",value:function(){return this._locks>0}},{key:"lock",value:function(){var e,n=this;this._locks+=1;var t=new Promise(function(t){return e=function(){n._locks-=1,t()}}),r=this._locking.then(function(){return e});return this._locking=this._locking.then(function(){return t}),r}}])}();!function(e){e[e.WAITING=0]="WAITING",e[e.RUNNING=1]="RUNNING",e[e.COMPLETED=2]="COMPLETED"}(ti||(ti={}));var ii,ai,oi=function(){return i(function e(){t(this,e),this.pendingTasks=new Map,this.taskMutex=new ri,this.nextTaskIndex=0},[{key:"run",value:function(e){return h(this,void 0,void 0,c().m(function n(){var t,r;return c().w(function(n){for(;;)switch(n.n){case 0:return t={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:ti.WAITING},this.pendingTasks.set(t.id,t),n.n=1,this.taskMutex.lock();case 1:return r=n.v,n.p=2,t.executedAt=Date.now(),t.status=ti.RUNNING,n.n=3,e();case 3:return n.a(2,n.v);case 4:return n.p=4,t.status=ti.COMPLETED,this.pendingTasks.delete(t.id),r(),n.f(4);case 5:return n.a(2)}},n,this,[[2,,4,5]])}))}},{key:"flush",value:function(){return h(this,void 0,void 0,c().m(function e(){var n=this;return c().w(function(e){for(;;)if(0===e.n)return e.a(2,this.run(function(){return h(n,void 0,void 0,c().m(function e(){return c().w(function(e){for(;;)if(0===e.n)return e.a(2)},e)}))}))},e,this)}))}},{key:"snapshot",value:function(){return Array.from(this.pendingTasks.values())}}])}(),ui="AES-GCM",si={key:10,delta:3,audio:1,empty:0},ci={sharedKey:!1,ratchetSalt:"LKFrameEncryptionKey",ratchetWindowSize:8,failureTolerance:10,keyringSize:16},li=function(e){function r(e,i){var a;return t(this,r),(a=n(this,r,[i||"an error has occured"])).code=e,a}return u(r,e),i(r)}(k(Error));!function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"}(ii||(ii={})),function(e){e.getFailure=function(n){if(n&&"name"in n)return"NotFoundError"===n.name||"DevicesNotFoundError"===n.name?e.NotFound:"NotAllowedError"===n.name||"PermissionDeniedError"===n.name?e.PermissionDenied:"NotReadableError"===n.name||"TrackStartError"===n.name?e.DeviceInUse:e.Other}}(ii||(ii={})),function(e){e[e.InvalidKey=0]="InvalidKey",e[e.MissingKey=1]="MissingKey",e[e.InternalError=2]="InternalError"}(ai||(ai={}));var fi,di,mi,yi,pi=function(e){function r(e){var i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ai.InternalError,o=arguments.length>2?arguments[2]:void 0;return t(this,r),(i=n(this,r,[40,e])).reason=a,i.participantIdentity=o,i}return u(r,e),i(r)}(li);function vi(e){return h(this,arguments,void 0,function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{name:ui},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"encrypt";return c().m(function r(){return c().w(function(r){for(;;)if(0===r.n)return r.a(2,crypto.subtle.importKey("raw",e,n,!1,"derive"===t?["deriveBits","deriveKey"]:["encrypt","decrypt"]))},r)})()})}function ki(e,n){var t=(new TextEncoder).encode(n);switch(e){case"HKDF":return{name:"HKDF",salt:t,hash:"SHA-256",info:new ArrayBuffer(128)};case"PBKDF2":return{name:"PBKDF2",salt:t,hash:"SHA-256",iterations:1e5};default:throw new Error("algorithm ".concat(e," is currently unsupported"))}}function hi(e,n){return h(this,void 0,void 0,c().m(function t(){var r,i;return c().w(function(t){for(;;)switch(t.n){case 0:return r=ki(e.algorithm.name,n),t.n=1,crypto.subtle.deriveKey(r,e,{name:ui,length:128},!1,["encrypt","decrypt"]);case 1:return i=t.v,t.a(2,{material:e,encryptionKey:i})}},t)}))}function gi(e,n){return h(this,void 0,void 0,c().m(function t(){var r;return c().w(function(t){for(;;)if(0===t.n)return r=ki(e.algorithm.name,n),t.a(2,crypto.subtle.deriveBits(r,e,256))},t)}))}function Ti(e){for(var n=0;n<e.length-3;n++)if(0==e[n]&&0==e[n+1]&&3==e[n+2])return!0;return!1}function wi(e){for(var n=[],t=e.length,r=0;r<e.length;)t-r>=3&&!e[r]&&!e[r+1]&&3==e[r+2]?(n.push(e[r++]),n.push(e[r++]),r++):n.push(e[r++]);return new Uint8Array(n)}!function(e){e.SetKey="setKey",e.RatchetRequest="ratchetRequest",e.KeyRatcheted="keyRatcheted"}(fi||(fi={})),function(e){e.KeyRatcheted="keyRatcheted"}(di||(di={})),function(e){e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError"}(mi||(mi={})),function(e){e.Error="cryptorError"}(yi||(yi={}));function Si(e){for(var n=[],t=0,r=0;r<e.length;++r){var i=e[r];i<=3&&t>=2&&(n.push(3),t=0),n.push(i),0==i?++t:t=0}return new Uint8Array(n)}var bi=function(){return i(function e(){t(this,e),this.consecutiveSifCount=0,this.lastSifReceivedAt=0,this.userFramesSinceSif=0},[{key:"recordSif",value:function(){var e;this.consecutiveSifCount+=1,null!==(e=this.sifSequenceStartedAt)&&void 0!==e||(this.sifSequenceStartedAt=Date.now()),this.lastSifReceivedAt=Date.now()}},{key:"recordUserFrame",value:function(){void 0!==this.sifSequenceStartedAt&&(this.userFramesSinceSif+=1,(this.userFramesSinceSif>this.consecutiveSifCount||Date.now()-this.lastSifReceivedAt>2e3)&&this.reset())}},{key:"isSifAllowed",value:function(){return this.consecutiveSifCount<100&&(void 0===this.sifSequenceStartedAt||Date.now()-this.sifSequenceStartedAt<2e3)}},{key:"reset",value:function(){this.userFramesSinceSif=0,this.consecutiveSifCount=0,this.sifSequenceStartedAt=void 0}}])}(),Ei=new Map,Ni=function(e){function r(){return t(this,r),n(this,r,arguments)}return u(r,e),i(r,[{key:"encodeFunction",value:function(e,n){throw Error("not implemented for subclass")}},{key:"decodeFunction",value:function(e,n){throw Error("not implemented for subclass")}}])}(zr.EventEmitter),Ii=function(e){function r(e){var i,a;return t(this,r),(i=n(this,r)).sendCounts=new Map,i.keys=e.keys,i.participantIdentity=e.participantIdentity,i.rtpMap=new Map,i.keyProviderOptions=e.keyProviderOptions,i.sifTrailer=null!==(a=e.sifTrailer)&&void 0!==a?a:Uint8Array.from([]),i.sifGuard=new bi,i}return u(r,e),i(r,[{key:"logContext",get:function(){return{participant:this.participantIdentity,mediaTrackId:this.trackId,fallbackCodec:this.videoCodec}}},{key:"setParticipant",value:function(e,n){L.debug("setting new participant on cryptor",Object.assign(Object.assign({},this.logContext),{participant:e})),this.participantIdentity&&L.error("cryptor has already a participant set, participant should have been unset before",Object.assign({},this.logContext)),this.participantIdentity=e,this.keys=n,this.sifGuard.reset()}},{key:"unsetParticipant",value:function(){L.debug("unsetting participant",this.logContext),this.participantIdentity=void 0}},{key:"isEnabled",value:function(){return this.participantIdentity?Ei.get(this.participantIdentity):void 0}},{key:"getParticipantIdentity",value:function(){return this.participantIdentity}},{key:"getTrackId",value:function(){return this.trackId}},{key:"setVideoCodec",value:function(e){this.videoCodec=e}},{key:"setRtpMap",value:function(e){this.rtpMap=e}},{key:"setupTransform",value:function(e,n,t,r,i){var a=this;i&&(L.info("setting codec on cryptor to",{codec:i}),this.videoCodec=i),L.debug("Setting up frame cryptor transform",Object.assign({operation:e,passedTrackId:r,codec:i},this.logContext));var o="encode"===e?this.encodeFunction:this.decodeFunction,u=new TransformStream({transform:o.bind(this)});n.pipeThrough(u).pipeTo(t).catch(function(e){L.warn(e),a.emit(yi.Error,e instanceof pi?e:new pi(e.message,void 0,a.participantIdentity))}),this.trackId=r}},{key:"setSifTrailer",value:function(e){L.debug("setting SIF trailer",Object.assign(Object.assign({},this.logContext),{trailer:e})),this.sifTrailer=e}},{key:"encodeFunction",value:function(e,n){return h(this,void 0,void 0,c().m(function t(){var r,i,a,o,u,s,l,f,d,m,y,p;return c().w(function(t){for(;;)switch(t.n){case 0:if(this.isEnabled()&&0!==e.data.byteLength){t.n=1;break}return t.a(2,n.enqueue(e));case 1:if(i=this.keys.getKeySet()){t.n=2;break}return this.emit(yi.Error,new pi("key set not found for ".concat(this.participantIdentity," at index ").concat(this.keys.getCurrentKeyIndex()),ai.MissingKey,this.participantIdentity)),t.a(2,n.enqueue(e));case 2:if(a=i.encryptionKey,o=this.keys.getCurrentKeyIndex(),!a){t.n=6;break}return u=this.makeIV(null!==(r=e.getMetadata().synchronizationSource)&&void 0!==r?r:-1,e.timestamp),s=this.getUnencryptedBytes(e),l=new Uint8Array(e.data,0,s.unencryptedBytes),(f=new Uint8Array(2))[0]=12,f[1]=o,t.p=3,t.n=4,crypto.subtle.encrypt({name:ui,iv:u,additionalData:new Uint8Array(e.data,0,l.byteLength)},a,new Uint8Array(e.data,s.unencryptedBytes));case 4:return d=t.v,(m=new Uint8Array(d.byteLength+u.byteLength+f.byteLength)).set(new Uint8Array(d)),m.set(new Uint8Array(u),d.byteLength),m.set(f,d.byteLength+u.byteLength),s.isH264&&(m=Si(m)),(y=new Uint8Array(l.byteLength+m.byteLength)).set(l),y.set(m,l.byteLength),e.data=y.buffer,t.a(2,n.enqueue(e));case 5:t.p=5,p=t.v,L.error(p),t.n=7;break;case 6:L.debug("failed to encrypt, emitting error",this.logContext),this.emit(yi.Error,new pi("encryption key missing for encoding",ai.MissingKey,this.participantIdentity));case 7:return t.a(2)}},t,this,[[3,5]])}))}},{key:"decodeFunction",value:function(e,n){return h(this,void 0,void 0,c().m(function t(){var r,i,a,o;return c().w(function(t){for(;;)switch(t.n){case 0:if(this.isEnabled()&&0!==e.data.byteLength){t.n=1;break}return L.debug("skipping empty frame",this.logContext),this.sifGuard.recordUserFrame(),t.a(2,n.enqueue(e));case 1:if(!Ai(e.data,this.sifTrailer)){t.n=4;break}if(L.debug("enqueue SIF",this.logContext),this.sifGuard.recordSif(),!this.sifGuard.isSifAllowed()){t.n=2;break}return e.data=e.data.slice(0,e.data.byteLength-this.sifTrailer.byteLength),t.a(2,n.enqueue(e));case 2:return L.warn("SIF limit reached, dropping frame"),t.a(2);case 3:t.n=5;break;case 4:this.sifGuard.recordUserFrame();case 5:if(r=new Uint8Array(e.data),i=r[e.data.byteLength-1],!this.keys.hasInvalidKeyAtIndex(i)){t.n=6;break}return t.a(2);case 6:if(!this.keys.getKeySet(i)){t.n=12;break}return t.p=7,t.n=8,this.decryptFrame(e,i);case 8:if(a=t.v,this.keys.decryptionSuccess(i),!a){t.n=9;break}return t.a(2,n.enqueue(a));case 9:t.n=11;break;case 10:t.p=10,(o=t.v)instanceof pi&&o.reason===ai.InvalidKey?this.keys.hasValidKey&&(this.emit(yi.Error,o),this.keys.decryptionFailure(i)):L.warn("decoding frame failed",{error:o});case 11:t.n=13;break;case 12:L.warn("skipping decryption due to missing key at index ".concat(i)),this.emit(yi.Error,new pi("missing key at index ".concat(i," for participant ").concat(this.participantIdentity),ai.MissingKey,this.participantIdentity)),this.keys.decryptionFailure(i);case 13:return t.a(2)}},t,this,[[7,10]])}))}},{key:"decryptFrame",value:function(e,n){return h(this,arguments,void 0,function(e,n){var t=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{ratchetCount:0};return c().m(function a(){var o,u,s,l,f,d,m,y,p,v,k,h,g,T,w,S,b,E;return c().w(function(a){for(;;)switch(a.n){case 0:if(u=t.keys.getKeySet(n),i.encryptionKey||u){a.n=1;break}throw new TypeError("no encryption key found for decryption of ".concat(t.participantIdentity));case 1:return s=t.getUnencryptedBytes(e),a.p=2,l=new Uint8Array(e.data,0,s.unencryptedBytes),f=new Uint8Array(e.data,l.length,e.data.byteLength-l.length),s.isH264&&Ti(f)&&(f=wi(f),(d=new Uint8Array(l.byteLength+f.byteLength)).set(l),d.set(f,l.byteLength),e.data=d.buffer),m=new Uint8Array(e.data,e.data.byteLength-2,2),y=m[0],p=new Uint8Array(e.data,e.data.byteLength-y-m.byteLength,y),v=l.byteLength,k=e.data.byteLength-(l.byteLength+y+m.byteLength),a.n=3,crypto.subtle.decrypt({name:ui,iv:p,additionalData:new Uint8Array(e.data,0,l.byteLength)},null!==(o=i.encryptionKey)&&void 0!==o?o:u.encryptionKey,new Uint8Array(e.data,v,k));case 3:return h=a.v,g=new ArrayBuffer(l.byteLength+h.byteLength),(T=new Uint8Array(g)).set(new Uint8Array(e.data,0,l.byteLength)),T.set(new Uint8Array(h),l.byteLength),e.data=g,a.a(2,e);case 4:if(a.p=4,E=a.v,!(t.keyProviderOptions.ratchetWindowSize>0)){a.n=11;break}if(!(i.ratchetCount<t.keyProviderOptions.ratchetWindowSize)){a.n=9;break}if(L.debug("ratcheting key attempt ".concat(i.ratchetCount," of ").concat(t.keyProviderOptions.ratchetWindowSize,", for kind ").concat(e instanceof RTCEncodedAudioFrame?"audio":"video")),(null!=r?r:u)!==t.keys.getKeySet(n)){a.n=7;break}return a.n=5,t.keys.ratchetKey(n,!1);case 5:return S=a.v,a.n=6,hi(S,t.keyProviderOptions.ratchetSalt);case 6:w=a.v;case 7:return a.n=8,t.decryptFrame(e,n,r||u,{ratchetCount:i.ratchetCount+1,encryptionKey:null==w?void 0:w.encryptionKey});case 8:return(b=a.v)&&w&&(null!=r?r:u)===t.keys.getKeySet(n)&&(t.keys.setKeySet(w,n,!0),t.keys.setCurrentKeyIndex(n)),a.a(2,b);case 9:throw L.warn("maximum ratchet attempts exceeded"),new pi("valid key missing for participant ".concat(t.participantIdentity),ai.InvalidKey,t.participantIdentity);case 10:a.n=12;break;case 11:throw new pi("Decryption failed: ".concat(E.message),ai.InvalidKey,t.participantIdentity);case 12:return a.a(2)}},a,null,[[2,4]])})()})}},{key:"makeIV",value:function(e,n){var t,r=new ArrayBuffer(12),i=new DataView(r);this.sendCounts.has(e)||this.sendCounts.set(e,Math.floor(65535*Math.random()));var a=null!==(t=this.sendCounts.get(e))&&void 0!==t?t:0;return i.setUint32(0,e),i.setUint32(4,n),i.setUint32(8,n-a%65535),this.sendCounts.set(e,a+1),r}},{key:"getUnencryptedBytes",value:function(e){var n,t={unencryptedBytes:0,isH264:!1};if(function(e){return"type"in e}(e)){var r=null!==(n=this.getVideoCodec(e))&&void 0!==n?n:this.videoCodec;if(r!==this.detectedCodec&&(L.debug("detected different codec",Object.assign({detectedCodec:r,oldCodec:this.detectedCodec},this.logContext)),this.detectedCodec=r),"av1"===r)throw new Error("".concat(r," is not yet supported for end to end encryption"));if("vp8"===r)t.unencryptedBytes=si[e.type];else if("vp9"===r)return t.unencryptedBytes=0,t;var i=new Uint8Array(e.data);try{var o=function(e){var n=[],t=0,r=0,i=e.length-2;for(;r<i;){for(;r<i&&(0!==e[r]||0!==e[r+1]||1!==e[r+2]);)r++;r>=i&&(r=e.length);for(var a=r;a>t&&0===e[a-1];)a--;if(0===t){if(a!==t)throw TypeError("byte stream contains leading data")}else n.push(t);t=r+=3}return n}(i);if(t.isH264="h264"===r||o.some(function(e){return[Oi.SLICE_IDR,Oi.SLICE_NON_IDR].includes(_i(i[e]))}),t.isH264){var u,s=a(o);try{for(s.s();!(u=s.n()).done;){var c=u.value;switch(_i(i[c])){case Oi.SLICE_IDR:case Oi.SLICE_NON_IDR:return t.unencryptedBytes=c+2,t}}}catch(e){s.e(e)}finally{s.f()}throw new TypeError("Could not find NALU")}}catch(e){}return t.unencryptedBytes=si[e.type],t}return t.unencryptedBytes=si.audio,t}},{key:"getVideoCodec",value:function(e){if(0!==this.rtpMap.size){var n=e.getMetadata().payloadType;return n?this.rtpMap.get(n):void 0}}}])}(Ni);function _i(e){return e&Li}var Oi,Li=31;function Ai(e,n){if(0===n.byteLength)return!1;var t=new Uint8Array(e.slice(e.byteLength-n.byteLength));return n.every(function(e,n){return e===t[n]})}!function(e){e[e.SLICE_NON_IDR=1]="SLICE_NON_IDR",e[e.SLICE_PARTITION_A=2]="SLICE_PARTITION_A",e[e.SLICE_PARTITION_B=3]="SLICE_PARTITION_B",e[e.SLICE_PARTITION_C=4]="SLICE_PARTITION_C",e[e.SLICE_IDR=5]="SLICE_IDR",e[e.SEI=6]="SEI",e[e.SPS=7]="SPS",e[e.PPS=8]="PPS",e[e.AUD=9]="AUD",e[e.END_SEQ=10]="END_SEQ",e[e.END_STREAM=11]="END_STREAM",e[e.FILLER_DATA=12]="FILLER_DATA",e[e.SPS_EXT=13]="SPS_EXT",e[e.PREFIX_NALU=14]="PREFIX_NALU",e[e.SUBSET_SPS=15]="SUBSET_SPS",e[e.DPS=16]="DPS",e[e.SLICE_AUX=19]="SLICE_AUX",e[e.SLICE_EXT=20]="SLICE_EXT",e[e.SLICE_LAYER_EXT=21]="SLICE_LAYER_EXT"}(Oi||(Oi={}));var Ci,Ji,Ri=function(e){function r(e,i){var a;if(t(this,r),(a=n(this,r)).currentKeyIndex=0,i.keyringSize<1||i.keyringSize>256)throw new TypeError("Keyring size needs to be between 1 and 256");return a.cryptoKeyRing=new Array(i.keyringSize).fill(void 0),a.decryptionFailureCounts=new Array(i.keyringSize).fill(0),a.keyProviderOptions=i,a.ratchetPromiseMap=new Map,a.participantIdentity=e,a}return u(r,e),i(r,[{key:"hasValidKey",get:function(){return!this.hasInvalidKeyAtIndex(this.currentKeyIndex)}},{key:"hasInvalidKeyAtIndex",value:function(e){return this.keyProviderOptions.failureTolerance>=0&&this.decryptionFailureCounts[e]>this.keyProviderOptions.failureTolerance}},{key:"decryptionFailure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentKeyIndex;this.keyProviderOptions.failureTolerance<0||(this.decryptionFailureCounts[e]+=1,this.decryptionFailureCounts[e]>this.keyProviderOptions.failureTolerance&&L.warn("key for ".concat(this.participantIdentity," at index ").concat(e," is being marked as invalid")))}},{key:"decryptionSuccess",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.currentKeyIndex;this.resetKeyStatus(e)}},{key:"resetKeyStatus",value:function(e){void 0===e?this.decryptionFailureCounts.fill(0):this.decryptionFailureCounts[e]=0}},{key:"ratchetKey",value:function(e){var n=this,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=null!=e?e:this.getCurrentKeyIndex(),i=this.ratchetPromiseMap.get(r);if(void 0!==i)return i;var a=new Promise(function(e,i){return h(n,void 0,void 0,c().m(function n(){var a,o,u,s,l,f,d;return c().w(function(n){for(;;)switch(n.n){case 0:if(n.p=0,a=this.getKeySet(r)){n.n=1;break}throw new TypeError("Cannot ratchet key without a valid keyset of participant ".concat(this.participantIdentity));case 1:return o=a.material,s=vi,n.n=2,gi(o,this.keyProviderOptions.ratchetSalt);case 2:return l=n.v,f=o.algorithm.name,n.n=3,s(l,f,"derive");case 3:if(u=n.v,!t){n.n=5;break}return n.n=4,this.setKeyFromMaterial(u,r,!0);case 4:this.emit(di.KeyRatcheted,u,this.participantIdentity,r);case 5:e(u),n.n=7;break;case 6:n.p=6,d=n.v,i(d);case 7:return n.p=7,this.ratchetPromiseMap.delete(r),n.f(7);case 8:return n.a(2)}},n,this,[[0,6,7,8]])}))});return this.ratchetPromiseMap.set(r,a),a}},{key:"setKey",value:function(e){return h(this,arguments,void 0,function(e){var n=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return c().m(function r(){return c().w(function(r){for(;;)switch(r.n){case 0:return r.n=1,n.setKeyFromMaterial(e,t);case 1:n.resetKeyStatus(t);case 2:return r.a(2)}},r)})()})}},{key:"setKeyFromMaterial",value:function(e,n){return h(this,arguments,void 0,function(e,n){var t=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return c().m(function i(){var a,o;return c().w(function(i){for(;;)switch(i.n){case 0:return i.n=1,hi(e,t.keyProviderOptions.ratchetSalt);case 1:a=i.v,o=n>=0?n%t.cryptoKeyRing.length:t.currentKeyIndex,L.debug("setting new key with index ".concat(n),{usage:e.usages,algorithm:e.algorithm,ratchetSalt:t.keyProviderOptions.ratchetSalt}),t.setKeySet(a,o,r),o>=0&&(t.currentKeyIndex=o);case 2:return i.a(2)}},i)})()})}},{key:"setKeySet",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.cryptoKeyRing[n%this.cryptoKeyRing.length]=e,t&&this.emit(di.KeyRatcheted,e.material,this.participantIdentity,n)}},{key:"setCurrentKeyIndex",value:function(e){return h(this,void 0,void 0,c().m(function n(){return c().w(function(n){for(;;)switch(n.n){case 0:this.currentKeyIndex=e%this.cryptoKeyRing.length,this.resetKeyStatus(e);case 1:return n.a(2)}},n,this)}))}},{key:"getCurrentKeyIndex",value:function(){return this.currentKeyIndex}},{key:"getKeySet",value:function(e){return this.cryptoKeyRing[null!=e?e:this.currentKeyIndex]}}])}(zr.EventEmitter),Pi=[],Di=new Map,Ui=new oi,Fi=!1,Bi=ci,qi=new Map;function Mi(e){return h(this,void 0,void 0,c().m(function n(){var t,r;return c().w(function(n){for(;;)switch(n.n){case 0:if(!Fi){n.n=2;break}return t=Vi(),n.n=1,t.ratchetKey(e.keyIndex);case 1:t.resetKeyStatus(),n.n=5;break;case 2:if(!e.participantIdentity){n.n=4;break}return r=Ki(e.participantIdentity),n.n=3,r.ratchetKey(e.keyIndex);case 3:r.resetKeyStatus(),n.n=5;break;case 4:L.error("no participant Id was provided for ratchet request and shared key usage is disabled");case 5:return n.a(2)}},n)}))}function xi(e,n){var t=Pi.filter(function(e){return e.getTrackId()===n});if(t.length>1){var r=t.map(function(e){return{participant:e.getParticipantIdentity()}}).join(",");L.error("Found multiple cryptors for the same trackID ".concat(n,". target participant: ").concat(e," "),{participants:r})}var i=t[0];if(i)e!==i.getParticipantIdentity()&&i.setParticipant(e,Ki(e));else{if(L.info("creating new cryptor for",{participantIdentity:e}),!Bi)throw Error("Missing keyProvider options");(i=new Ii({participantIdentity:e,keys:Ki(e),keyProviderOptions:Bi,sifTrailer:Ji})).setRtpMap(qi),function(e){e.on(yi.Error,function(e){var n={kind:"error",data:{error:new Error("".concat(ai[e.reason],": ").concat(e.message))}};postMessage(n)})}(i),Pi.push(i)}return i}function Ki(e){if(Fi)return Vi();var n=Di.get(e);return n||((n=new Ri(e,Bi)).on(di.KeyRatcheted,Wi),Di.set(e,n)),n}function Vi(){return Ci||(L.debug("creating new shared key handler"),Ci=new Ri("shared-key",Bi)),Ci}function ji(e,n){var t=Pi.filter(function(t){return t.getParticipantIdentity()===n&&t.getTrackId()===e});t.length>1&&L.error("Found multiple cryptors for the same participant and trackID combination",{trackId:e,participantIdentity:n});var r=t[0];r?r.unsetParticipant():L.warn("Could not unset participant on cryptor",{trackId:e,participantIdentity:n})}function Gi(e,n){L.debug("setting encryption enabled for all tracks of ".concat(n),{enable:e}),Ei.set(n,e)}function Hi(e,n){return h(this,void 0,void 0,c().m(function t(){return c().w(function(t){for(;;)switch(t.n){case 0:return L.info("set shared key",{index:n}),t.n=1,Vi().setKey(e,n);case 1:return t.a(2)}},t)}))}function Wi(e,n,t){postMessage({kind:"ratchetKey",data:{participantIdentity:n,keyIndex:t,material:e}})}function zi(e){Ji=e,Pi.forEach(function(n){n.setSifTrailer(e)})}L.setDefaultLevel("info"),onmessage=function(e){Ui.run(function(){return h(void 0,void 0,void 0,c().m(function n(){var t,r,i,a;return c().w(function(n){for(;;)switch(n.n){case 0:t=e.data,r=t.kind,i=t.data,a=r,n.n="init"===a?1:"enable"===a?2:"decode"===a?3:"encode"===a?4:"setKey"===a?5:"removeTransform"===a?11:"updateCodec"===a?12:"setRTPMap"===a?13:"ratchetRequest"===a?14:"setSifTrailer"===a?15:16;break;case 1:return L.setLevel(i.loglevel),L.info("worker initialized"),Bi=i.keyProviderOptions,Fi=!!i.keyProviderOptions.sharedKey,postMessage({kind:"initAck",data:{enabled:false}}),n.a(3,17);case 2:return Gi(i.enabled,i.participantIdentity),L.info("updated e2ee enabled status for ".concat(i.participantIdentity," to ").concat(i.enabled)),postMessage(e.data),n.a(3,17);case 3:return xi(i.participantIdentity,i.trackId).setupTransform(r,i.readableStream,i.writableStream,i.trackId,i.codec),n.a(3,17);case 4:return xi(i.participantIdentity,i.trackId).setupTransform(r,i.readableStream,i.writableStream,i.trackId,i.codec),n.a(3,17);case 5:if(!Fi){n.n=7;break}return n.n=6,Hi(i.key,i.keyIndex);case 6:n.n=10;break;case 7:if(!i.participantIdentity){n.n=9;break}return L.info("set participant sender key ".concat(i.participantIdentity," index ").concat(i.keyIndex)),n.n=8,Ki(i.participantIdentity).setKey(i.key,i.keyIndex);case 8:n.n=10;break;case 9:L.error("no participant Id was provided and shared key usage is disabled");case 10:return n.a(3,17);case 11:return ji(i.trackId,i.participantIdentity),n.a(3,17);case 12:return xi(i.participantIdentity,i.trackId).setVideoCodec(i.codec),n.a(3,17);case 13:return qi=i.map,Pi.forEach(function(e){e.getParticipantIdentity()===i.participantIdentity&&e.setRtpMap(i.map)}),n.a(3,17);case 14:return Mi(i),n.a(3,17);case 15:return zi(i.trailer),n.a(3,17);case 16:return n.a(3,17);case 17:return n.a(2)}},n)}))})},self.RTCTransformEvent&&(L.debug("setup transform event"),self.onrtctransform=function(e){var n=e.transformer;L.debug("transformer",n),n.handled=!0;var t=n.options,r=t.kind,i=t.participantIdentity,a=t.trackId,o=t.codec,u=xi(i,a);L.debug("transform",{codec:o}),u.setupTransform(r,n.readable,n.writable,a,o)})});
//# sourceMappingURL=ecprt-client-sdk.e2ee.worker.js.map
