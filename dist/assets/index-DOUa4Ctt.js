import{E as Z,R as J,V as R,a as h,T as $,L as V,c as ee,M as te,b as D,s as ne,d as oe,S as ie,e as ae,f as se,P as M,g as I,h as j,C as N,i as F,j as ce}from"./ecprt-sdk-BDMqnLva.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function i(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=i(a);fetch(a.href,n)}})();const re="modulepreload",le=function(e){return"/web-sample/"+e},W={},z=function(t,i,o){let a=Promise.resolve();if(i&&i.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),l=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));a=Promise.all(i.map(u=>{if(u=le(u),u in W)return;W[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":re,c||(f.as="script",f.crossOrigin=""),f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}return a.then(()=>t()).catch(n=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=n,window.dispatchEvent(l),!l.defaultPrevented)throw n})},r=e=>document.getElementById(e),y={isFrontFacing:!1,encoder:new TextEncoder,decoder:new TextDecoder,defaultDevices:new Map,bitrateInterval:void 0,e2eeKeyProvider:new Z};let s,w;const K=new URLSearchParams(window.location.search),de=K.get("url")??"ws://localhost:7880",ue=K.get("token")??"";r("url").value=de;r("token").value=ue;let q=K.get("key");q?r("crypto-key").value=q:r("crypto-key").value="password";function fe(e,t,i){const o=new URLSearchParams({url:e,token:t,key:i});window.history.replaceState(null,"",`${window.location.pathname}?${o.toString()}`)}const Q=new Set;function me(e,t,i){console.log("TranscriptionReceived RoomEvent");for(const l of e)console.log("TranscriptionSegment"),console.log(l),console.log(t),console.log(`[ Speaker: ${t==null?void 0:t.identity}, TranscriptionSegment id: ${l.id}, text: ${l.text}
    , language: ${l.language}, firstReceivedTime: ${l.firstReceivedTime}, lastReceivedTime: ${l.lastReceivedTime}
    , startTime: ${l.startTime}, endTime: ${l.endTime}, final: ${l.final}, error: ${l.error}, failureReason: ${l.failureReason} ]`);const o=r("live-transcription"),a=r("final-transcription"),n=(t==null?void 0:t.identity)||"Unknown";e.forEach(l=>{const u=new Date(l.lastReceivedTime),c=u.toLocaleDateString("en-US"),d=u.toLocaleTimeString("en-US",{hour12:!0}),f=`${c} ${d}`;if(l.final){const p=`${n}-${l.text.trim()}`;if(!Q.has(p)){Q.add(p);const v=document.createElement("div"),b=document.createElement("span");b.style.color="grey",b.textContent=f+" ";const P=document.createElement("span");P.style.fontWeight="bold",P.textContent=n+": ";const T=document.createElement("span");T.style.color="green",T.textContent=l.text,v.appendChild(b),v.appendChild(P),v.appendChild(T),a.appendChild(v)}const g=document.getElementById(`live-${n}`);g&&g.remove()}else{let p=document.getElementById(`live-${n}`);if(p){const g=document.getElementById(`live-timestamp-${n}`);g&&(g.textContent=f+" ");const v=document.getElementById(`live-message-${n}`);v&&v.textContent!==l.text&&(v.textContent=l.text)}else{p=document.createElement("div"),p.id=`live-${n}`;const g=document.createElement("span");g.id=`live-timestamp-${n}`,g.style.color="grey",g.textContent=f+" ";const v=document.createElement("span");v.style.fontWeight="bold",v.textContent=n+": ";const b=document.createElement("span");b.id=`live-message-${n}`,b.style.color="blue",b.textContent=l.text,p.appendChild(g),p.appendChild(v),p.appendChild(b),o.appendChild(p)}}}),o.scrollTop=o.scrollHeight,a.scrollTop=a.scrollHeight}const G={connectWithFormInput:async()=>{var T,H;const e=r("url").value,t=r("token").value,i=r("simulcast").checked,o=r("dynacast").checked,a=r("force-turn").checked,n=r("adaptive-stream").checked,l=r("publish-option").checked,u=r("preferred-codec").value;let c=D.h720.resolution;const d=r("preferred-quality").value,f=r("crypto-key").value,p=r("auto-subscribe").checked,g=r("audio-output").value,v=r("noise-suppression").value;switch(ne(oe.debug),fe(e,t,f),d){case"720":c=D.h720.resolution;break;case"540":c=D.h540.resolution;break}const b={adaptiveStream:n,dynacast:o,audioOutput:{deviceId:g},publishDefaults:{simulcast:i,videoSimulcastLayers:[D.h540,D.h720],videoCodec:u||"vp8",dtx:!0,red:!0,forceStereo:!1,screenShareEncoding:ie.h1080fps30.encoding,scalabilityMode:"L3T3_KEY"},videoCaptureDefaults:{resolution:c},audioCaptureDefaults:{noiseSuppression:v==="webrtc"}};(((T=b.publishDefaults)==null?void 0:T.videoCodec)==="av1"||((H=b.publishDefaults)==null?void 0:H.videoCodec)==="vp9")&&(b.publishDefaults.backupCodec=!0);const P={autoSubscribe:p};a&&(P.rtcConfig={iceTransportPolicy:"relay"}),await G.connectToRoom(e,t,b,P,l),y.bitrateInterval=setInterval(ye,1e3)},connectToRoom:async(e,t,i,o,a)=>{const n=new J(i),{DenoiseProcessor:l}=await z(async()=>{const{DenoiseProcessor:c}=await import("./denoise-BT4NjA6X.js");return{DenoiseProcessor:c}},[]);w=Date.now(),await n.prepareConnection(e,t);const u=Date.now()-w;m(`prewarmed connection in ${u}ms`),n.on(h.ParticipantConnected,U).on(h.ParticipantDisconnected,he).on(h.ChatMessage,pe).on(h.Disconnected,ve).on(h.Reconnecting,()=>m("Reconnecting to room")).on(h.Reconnected,async()=>{m("Successfully reconnected. server",await n.engine.getConnectedServerAddress())}).on(h.TranscriptionReceived,me).on(h.LocalTrackPublished,async c=>{if(c.source===$.Source.Microphone&&c.track instanceof V){const f=r("noise-suppression").value;if(f!=="webrtc")try{const p=f==="deepfilter",g=new l({deepfilter:{enable:p},wasmBasePath:window.location.pathname});await c.track.setProcessor(g),await g.setEnabled(!0)}catch(p){console.error("Failed to initialize denoise processor:",p)}console.log("Denoise mode successfully applied:",f)}const d=c.track;if(d instanceof V){console.log("room recording is inprogress: "+n.isRecording);const{calculateVolume:f}=ee(d);setInterval(()=>{var p;(p=r("local-volume"))==null||p.setAttribute("value",f().toFixed(4))},200)}E(n.localParticipant),k(),x(n)}).on(h.LocalTrackUnpublished,()=>{E(n.localParticipant),k(),x(n)}).on(h.RoomMetadataChanged,c=>{m("new metadata for room",c)}).on(h.MediaDevicesChanged,_).on(h.AudioPlaybackStatusChanged,()=>{var c,d;n.canPlaybackAudio?(c=r("start-audio-button"))==null||c.setAttribute("disabled","true"):(d=r("start-audio-button"))==null||d.removeAttribute("disabled")}).on(h.MediaDevicesError,c=>{const d=te.getFailure(c);m("media device failure",d)}).on(h.ConnectionQualityChanged,(c,d)=>{m("connection quality changed",d==null?void 0:d.identity,c)}).on(h.TrackSubscribed,(c,d,f)=>{m("subscribed to track",d.trackSid,f.identity),E(f),x(n)}).on(h.TrackUnsubscribed,(c,d,f)=>{m("unsubscribed from track",d.trackSid),E(f),x(n)}).on(h.TrackUnpublished,(c,d)=>{m("TrackUnpublished from track",c.trackSid),E(d),x(n)}).on(h.SignalConnected,async()=>{const c=Date.now()-w;m(`signal connection established in ${c}ms`),a&&(await n.localParticipant.enableCameraAndMicrophone(),m(`tracks published in ${Date.now()-w}ms`),k())}).on(h.ReconnectICEDelay,c=>{m(`@ICE connection delay: ${c} seconds`)}).on(h.ParticipantEncryptionStatusChanged,()=>{k()}).on(h.RecordingStatusChanged,c=>{console.log("room recording is inprogress: "+c)}).on(h.TrackStreamStateChanged,(c,d,f)=>{m(`stream state changed for ${c.trackSid} (${f.identity}) to ${d.toString()}`)});try{const c=r("crypto-key").value;y.e2eeKeyProvider.setKey(c),r("e2ee").checked&&await n.setE2EEEnabled(!0),await n.connect(e,t,o);const d=Date.now()-w;m(`successfully connected to ${n.name} in ${Math.round(d)}ms`,await n.engine.getConnectedServerAddress())}catch(c){let d=c;c.message&&(d=c.message),m("could not connect:",d);return}return s=n,window.currentRoom=n,X(!0),k(),n.remoteParticipants.forEach(c=>{U(c)}),U(n.localParticipant),n},toggleE2EE:async()=>{if(!s||!s.options.e2ee)return;const e=r("crypto-key").value;y.e2eeKeyProvider.setKey(e),await s.setE2EEEnabled(!s.isE2EEEnabled)},ratchetE2EEKey:async()=>{!s||!s.options.e2ee||await y.e2eeKeyProvider.ratchetKey()},toggleAudio:async()=>{if(!s)return;const e=s.localParticipant.isMicrophoneEnabled;S("toggle-audio-button",!0),m(e?"disabling audio":"enabling audio"),await s.localParticipant.setMicrophoneEnabled(!e),S("toggle-audio-button",!1),k()},toggleVideo:async()=>{if(!s)return;S("toggle-video-button",!0);const e=s.localParticipant.isCameraEnabled;m(e?"disabling video":"enabling video"),await s.localParticipant.setCameraEnabled(!e),S("toggle-video-button",!1),E(s.localParticipant),k()},flipVideo:()=>{var i;const e=s==null?void 0:s.localParticipant.getTrackPublication($.Source.Camera);if(!e)return;y.isFrontFacing?A("flip-video-button","Front Camera",!1):A("flip-video-button","Back Camera",!1),y.isFrontFacing=!y.isFrontFacing;const t={resolution:D.h720.resolution,facingMode:y.isFrontFacing?"user":"environment"};(i=e.videoTrack)==null||i.restartTrack(t)},shareScreen:async()=>{if(!s)return;const e=s.localParticipant.isScreenShareEnabled;m(`${e?"stopping":"starting"} screen share`),S("share-screen-button",!0);try{await s.localParticipant.setScreenShareEnabled(!e,{audio:!0})}catch(t){m("error sharing screen",t)}S("share-screen-button",!1),k()},startAudio:()=>{s==null||s.startAudio()},enterText:()=>{var l;if(!s)return;const e=r("chat-error");if(e.style.display="none",!((l=s.localParticipant.permissions)!=null&&l.canPublishData)){const u=r("chat-error");u.innerHTML="You are not permitted to use Chat feature. Please contact admin.",u.style.display="block",u.style.color="red";return}const t=r("entry");var i=r("participant-list"),o=new Array,a,n=0;for(a=0;a<i.options.length;a++)i.options[a].selected&&(o[n]=i.options[a].value,n++);if(t.value){const u=y.encoder.encode(t.value);o.length>0&&!o.includes("everyone")?(m("sending message to participant(s)",o),s.localParticipant.publishData(u,{reliable:!0,destinationIdentities:o,topic:"lk-chat-topic"})):(m("sending message to all the participant"),s.localParticipant.publishData(u,{reliable:!0,topic:"lk-chat-topic"}));let c="Everyone";o.length>0&&!o.includes("Everyone")&&(o.length==1?s.remoteParticipants.forEach(f=>{f.sid==o[0]&&(c=f.name?f.name:f.identity)}):c="Specific Participants");const d=s.localParticipant.name?s.localParticipant.name:s.localParticipant.identity;r("chat").value+=`${d} (me) to ${c}: ${t.value}
`,t.value=""}},disconnectRoom:()=>{s&&s.disconnect(),y.bitrateInterval&&clearInterval(y.bitrateInterval)},handleScenario:e=>{const t=e.target.value;t==="subscribe-all"?s==null||s.remoteParticipants.forEach(i=>{i.trackPublications.forEach(o=>o.setSubscribed(!0))}):t==="unsubscribe-all"?s==null||s.remoteParticipants.forEach(i=>{i.trackPublications.forEach(o=>o.setSubscribed(!1))}):t!==""&&(s==null||s.simulateScenario(t),e.target.value="")},handleDeviceSelected:async e=>{const t=e.target.value,i=e.target.id,o=B[i];o&&(y.defaultDevices.set(o,t),s&&await s.switchActiveDevice(o,t))},handlePreferredQuality:e=>{const t=e.target.value;let i=R.HIGH;switch(t){case"low":i=R.LOW;break;case"medium":i=R.MEDIUM;break;case"high":i=R.HIGH;break}s&&s.remoteParticipants.forEach(o=>{o.trackPublications.forEach(a=>{a.setVideoQuality(i)})})},handlePreferredFPS:e=>{const t=+e.target.value;s&&s.remoteParticipants.forEach(i=>{i.trackPublications.forEach(o=>{o.setVideoFPS(t)})})},changeNoiseSuppression:async()=>{if(!s){console.log("Not connected to room");return}const e=s.localParticipant,t=Array.from(e.trackPublications.values()).find(a=>a.source===$.Source.Microphone&&a.track instanceof V);if(!(t!=null&&t.track)){console.log("No microphone track found");return}const i=r("noise-suppression").value;if(i==="webrtc"){console.warn("Cannot switch to WebRTC: WebRTC noise suppression must be set when creating the audio track.");return}const{DenoiseProcessor:o}=await z(async()=>{const{DenoiseProcessor:a}=await import("./denoise-BT4NjA6X.js");return{DenoiseProcessor:a}},[]);try{const a=i==="deepfilter",n=new o({deepfilter:{enable:a},wasmBasePath:window.location.pathname});await t.track.setProcessor(n),await n.setEnabled(!0),console.log("Noise suppression mode changed to:",i)}catch(a){console.error("Failed to change noise suppression mode:",a)}}};window.appActions=G;function pe(e,t){r("chat").value+=`${t==null?void 0:t.identity}${t instanceof I?" (me)":""}: ${e.message}
`}function U(e){m("participant",e.identity,"connected",e.metadata),console.log("tracks",e.trackPublications),e.on(M.TrackMuted,t=>{m("track was muted",t.trackSid,e.identity),E(e),k()}).on(M.TrackUnmuted,t=>{m("track was unmuted",t.trackSid,e.identity),E(e),k()}).on(M.IsSpeakingChanged,()=>{E(e)}).on(M.ConnectionQualityChanged,()=>{E(e)}).on(M.TranscriptionReceived,t=>{console.log("TranscriptionReceived ParticipantEvent:",t),t.forEach(i=>{console.log(`Speaker: ${e==null?void 0:e.identity}, Text: ${i.text}`)})}).on(M.ParticipantPermissionsChanged,(t,i)=>{e instanceof I&&(i!=null&&i.canPublish?(S("toggle-audio-button",!1),S("toggle-video-button",!1)):(S("toggle-audio-button",!0),S("toggle-video-button",!0)),console.log(t),console.log(i))}),ge(e)}function he(e){m("participant",e.sid,"disconnected"),E(e,!0),be(e)}function ve(e){if(!s)return;m("disconnected from room",{reason:e}),X(!1),E(s.localParticipant,!0),s.remoteParticipants.forEach(n=>{E(n,!0)}),x(s);const t=r("participants-area");t&&(t.innerHTML="");const i=r("chat");i.value="";const o=r("participant-list");let a=o.options.length;for(;a--;)o.options[a].value!="everyone"&&o.remove(a);s=void 0,window.currentRoom=void 0}function m(...e){const t=r("log");for(let i=0;i<arguments.length;i+=1)typeof e[i]=="object"?t.innerHTML+=`${JSON&&JSON.stringify?JSON.stringify(e[i],void 0,2):e[i]} `:t.innerHTML+=`${e[i]} `;t.innerHTML+=`
`,t.scrollTop=t.scrollHeight}function E(e,t=!1){var b,P,T,H;const i=r("participants-area");if(!i)return;const{identity:o}=e;let a=r(`participant-${o}`);if(!a&&!t){a=document.createElement("div"),a.id=`participant-${o}`,a.className="participant",a.innerHTML=`
      <video id="video-${o}"></video>
      <audio id="audio-${o}"></audio>
      <div class="info-bar">
        <div id="name-${o}" class="name">
        </div>
        <div style="text-align: center;">
          <span id="codec-${o}" class="codec">
          </span>
          <span id="size-${o}" class="size">
          </span>
          <span id="bitrate-${o}" class="bitrate">
          </span>
        </div>
        <div class="right">
          <span id="signal-${o}"></span>
          <span id="mic-${o}" class="mic-on"></span>
          <span id="e2ee-${o}" class="e2ee-on"></span>
        </div>
      </div>
      ${e instanceof j?`<div class="volume-control">
        <input id="volume-${o}" type="range" min="0" max="1" step="0.1" value="1" orient="vertical" />
      </div>`:'<progress id="local-volume" max="1" value="0" />'}

    `,i.appendChild(a);const C=r(`size-${o}`),L=r(`video-${o}`);L.onresize=()=>{Y(L,C)}}const n=r(`video-${o}`),l=r(`audio-${o}`);if(t){a==null||a.remove(),n&&(n.srcObject=null,n.src=""),l&&(l.srcObject=null,l.src="");return}r(`name-${o}`).innerHTML=e.identity,e instanceof I&&(r(`name-${o}`).innerHTML+=" (you)");const u=r(`mic-${o}`),c=r(`signal-${o}`),d=e.getTrackPublication($.Source.Camera),f=e.getTrackPublication($.Source.Microphone);if(e.isSpeaking?a.classList.add("speaking"):a.classList.remove("speaking"),e instanceof j&&r(`volume-${o}`).addEventListener("input",L=>{e.setVolume(Number.parseFloat(L.target.value))}),d&&d.isSubscribed&&!d.isMuted){if(e instanceof I)n.style.transform="scale(-1, 1)";else if(!((b=d==null?void 0:d.videoTrack)!=null&&b.attachedElements.includes(n))){const C=Date.now();n.onloadeddata=()=>{const L=Date.now()-C;let O=0;e.joinedAt&&e.joinedAt.getTime()<w&&(O=Date.now()-w),m(`RemoteVideoTrack ${d==null?void 0:d.trackSid} (${n.videoWidth}x${n.videoHeight}) rendered in ${L}ms`,O>0?`, ${O}ms from start`:"")}}(P=d==null?void 0:d.videoTrack)==null||P.attach(n)}else r(`size-${o}`).innerHTML="",d!=null&&d.videoTrack?(T=d.videoTrack)==null||T.detach(n):(n.src="",n.srcObject=null);f&&f.isSubscribed&&!f.isMuted?(e instanceof I||(l.onloadeddata=()=>{if(e.joinedAt&&e.joinedAt.getTime()<w){const C=Date.now()-w;m(`RemoteAudioTrack ${f==null?void 0:f.trackSid} played ${C}ms from start`)}},(H=f==null?void 0:f.audioTrack)==null||H.attach(l)),u.className="mic-on",u.innerHTML='<i class="fas fa-microphone"></i>'):(u.className="mic-off",u.innerHTML='<i class="fas fa-microphone-slash"></i>');const v=r(`e2ee-${o}`);switch(e.isEncrypted?(v.className="e2ee-on",v.innerHTML='<i class="fas fa-lock"></i>'):(v.className="e2ee-off",v.innerHTML='<i class="fas fa-unlock"></i>'),e.connectionQuality){case N.Excellent:case N.Good:case N.Poor:c.className=`connection-${e.connectionQuality}`,c.innerHTML='<i class="fas fa-circle"></i>';break;default:c.innerHTML=""}}function ge(e){if(!s||s.state!==F.Connected)return;const t=r("participant-list");if(e!=(s==null?void 0:s.localParticipant)){const i=document.createElement("option");e.name?i.text=e.name:i.text=e.identity,i.value=e.sid,t.appendChild(i)}}function be(e){if(!s||s.state!==F.Connected)return;const t=r("participant-list");if(e!=(s==null?void 0:s.localParticipant)){let i=t.options.length;for(;i--;)t.options[i].value==e.sid&&t.remove(i)}}function x(e){var n,l;const t=r("screenshare-area");if(e.state!==F.Connected){t.style.display="none";return}let i,o=e.localParticipant.getTrackPublication($.Source.ScreenShare),a;if(o?i=e.localParticipant:e.remoteParticipants.forEach(u=>{if(o)return;i=u;const c=u.getTrackPublication($.Source.ScreenShare);c!=null&&c.isSubscribed&&(o=c);const d=u.getTrackPublication($.Source.ScreenShareAudio);d!=null&&d.isSubscribed&&(a=d)}),o&&i){t.style.display="block";const u=r("screenshare-video");(n=o.videoTrack)==null||n.attach(u),a&&((l=a.audioTrack)==null||l.attach(u)),console.log("Outside onresize"),console.log(u.videoWidth+":"+u.videoHeight),u.onwaiting=()=>{console.log("Inside onwaiting"),c.innerHTML="Waiting for the good signal... If the issue persists for long, please refresh the browser to reconnect to the room."},u.onresize=()=>{console.log("Inside onresize"),console.log(u.videoWidth+":"+u.videoHeight),Y(u,r("screenshare-resolution"))},u.onplaying=()=>{console.log("Inside onplay"),i?c.innerHTML=`Screenshare from ${i.identity}`:c.innerHTML="Screenshare from unknown participant"};const c=r("screenshare-info");i?c.innerHTML=`Screenshare from ${i.identity}`:c.innerHTML="Screenshare from unknown participant"}else t.style.display="none"}function ye(){if(!s||s.state!==F.Connected)return;const e=[...s.remoteParticipants.values()];e.push(s.localParticipant);for(const t of e){const i=r(`bitrate-${t.identity}`);let o=0;for(const n of t.trackPublications.values())if(n.track&&(o+=n.track.currentBitrate),n.source===$.Source.Camera&&n.videoTrack instanceof ce){const l=r(`codec-${t.identity}`);l.innerHTML=n.videoTrack.getDecoderImplementation()??""}let a="";o>0&&(a=`${Math.round(o/1024).toLocaleString()} kbps`),i&&(i.innerHTML=a)}}function Y(e,t){t.innerHTML=`(${e.videoWidth}x${e.videoHeight})`}function A(e,t,i,o=void 0){const a=r(e);a&&(o!==void 0&&(a.disabled=o),a.innerHTML=t,i?a.classList.add("active"):a.classList.remove("active"))}function S(e,t){const i=r(e);i.disabled=t}setTimeout(_,100);function X(e){const t=["toggle-video-button","toggle-audio-button","share-screen-button","disconnect-ws-button","disconnect-room-button","flip-video-button","send-button"];s&&s.options.e2ee&&t.push("toggle-e2ee-button","e2ee-ratchet-button");const i=["connect-button"],o=e?t:i,a=e?i:t;o.forEach(n=>{var l;return(l=r(n))==null?void 0:l.removeAttribute("disabled")}),a.forEach(n=>{var l;return(l=r(n))==null?void 0:l.setAttribute("disabled","true")})}const B={"video-input":"videoinput","audio-input":"audioinput","audio-output":"audiooutput"};async function _(){Promise.all(Object.keys(B).map(async e=>{const t=B[e];if(!t)return;const i=await J.getLocalDevices(t),o=r(e);Ee(o,i,y.defaultDevices.get(t))}))}function Ee(e,t,i){for(const o of t){const a=document.createElement("option");a.text=o.label,a.value=o.deviceId,o.deviceId===i&&(a.selected=!0)}}function k(){if(!s)return;const e=s.localParticipant;A("toggle-video-button",`${e.isCameraEnabled?"Disable":"Enable"} Video`,e.isCameraEnabled),A("toggle-audio-button",`${e.isMicrophoneEnabled?"Disable":"Enable"} Audio`,e.isMicrophoneEnabled),A("share-screen-button",e.isScreenShareEnabled?"Stop Screen Share":"Share Screen",e.isScreenShareEnabled),A("toggle-e2ee-button",`${s.isE2EEEnabled?"Disable":"Enable"} E2EE`,s.isE2EEEnabled),S("toggle-audio-button",!1),S("toggle-video-button",!1)}async function Se(){_()}function ke(){const e=r("preferred-codec"),t=[["","Preferred codec"],["h264","H.264"],["vp8","VP8"]];ae()&&t.push(["vp9","VP9"]),se()&&t.push(["av1","AV1"]);for(const i of t){const o=document.createElement("option");o.value=i[0],o.appendChild(document.createTextNode(i[1])),e.appendChild(o)}}Se();ke();
